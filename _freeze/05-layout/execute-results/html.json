{
  "hash": "4c21d9b6d05682025aa6fea36af50d41",
  "result": {
    "markdown": "---\ntitle: \"Engaging & Reproducible Data Visualization\"\nsubtitle: \"<span style='font-size:1.5em;'>From Theory to Implementation with ggplot2</span><br><span style='font-weight:500;font-size:1.3em;'>Working with Layouts and Compositions</span></span>\"\nauthor: \"<b style='color:#28a87d;'><a href='https://www.cedricscherer.com'>Dr. Cédric Scherer</a></b>&ensp;**//**&ensp;RTG-UGI Workshop&ensp;**//**&ensp;October 2023\"\nformat:\n  revealjs:\n    theme: slides.scss\n    logo: img/logo.png\n    footer: '**[Cédric Scherer](https://cedricscherer.com)** // Data Visualization & Information Design'\n    transition: fade\n    progress: true\n    multiplex: false\n    preview-links: true\n    scrollable: false\n    hide-inactive-cursor: true\n    highlight-style: printing\n    chalkboard:\n      theme: whiteboard\n      boardmarker-width: 4\n      buttons: true\n    pause: true\n    mainfont: Asap SemiCondensed\neditor: source\nknitr:\n  opts_chunk:\n    dev: \"ragg_png\"\n    retina: 3\n    dpi: 200\nexecute:\n  freeze: auto\n  cache: true\n  echo: true\n  fig-width: 5\n  fig-height: 6\n---\n\n\n\n## Setup\n\n\n::: {.cell hash='05-layout_cache/revealjs/prep_a78f3c1f3d543e1386f8accd593b888d'}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(stringr)\n\nbikes <- readr::read_csv(\n  here::here(\"data\", \"london-bikes-custom.csv\"),\n  col_types = \"Dcfffilllddddc\"\n)\n\ntheme_set(theme_light(base_size = 14, base_family = \"Asap SemiCondensed\"))\n\ntheme_update(\n  panel.grid.minor = element_blank(),\n  plot.title = element_text(face = \"bold\"),\n  plot.title.position = \"plot\"\n)\n```\n:::\n\n\n\n\n# Legend Placement <br>and Styling\n\n\n\n## Discrete Legend\n\n\n::: {.cell output-location='column' hash='05-layout_cache/revealjs/legend-discrete-default_af92a85ef2683b2ea33aef52558c1ef8'}\n\n```{.r .cell-code  code-line-numbers=\"6|1,9\"}\npal <- c(\"#3c89d9\", \"#1ec99b\", \"#F7B01B\", \"#a26e7c\")\n\nggplot(\n    bikes,\n    aes(x = temp_feel, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_color_manual(values = pal)\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/legend-discrete-default-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Continuous Legend\n\n\n::: {.cell output-location='column' hash='05-layout_cache/revealjs/legend-continuous-default_9d88a90d5eea19dfb234e102d84a7a05'}\n\n```{.r .cell-code  code-line-numbers=\"4|7\"}\nggplot(\n    bikes,\n    aes(x = temp_feel, y = count,\n        color = humidity)\n  ) +\n  geom_point() +\n  scale_color_viridis_c()\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/legend-continuous-default-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Legend Position\n\n\n::: {.cell output-location='column' hash='05-layout_cache/revealjs/legend-position-bottom_9f94be78aafcab083ad4b9536451a0ea'}\n\n```{.r .cell-code  code-line-numbers=\"8,9,10\"}\nggplot(\n    bikes,\n    aes(x = temp_feel, y = count,\n        color = humidity)\n  ) +\n  geom_point() +\n  scale_color_viridis_c() +\n  theme(\n    legend.position = \"bottom\"\n  )\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/legend-position-bottom-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Legend Justification\n\n\n::: {.cell output-location='column' hash='05-layout_cache/revealjs/legend-position-bottom-left_a3a80e261b10373cfd427936edbfef13'}\n\n```{.r .cell-code  code-line-numbers=\"10\"}\nggplot(\n    bikes,\n    aes(x = temp_feel, y = count,\n        color = humidity)\n  ) +\n  geom_point() +\n  scale_color_viridis_c() +\n  theme(\n    legend.position = \"bottom\",\n    legend.justification = \"left\"\n  )\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/legend-position-bottom-left-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Legend Position\n\n\n::: {.cell output-location='column' hash='05-layout_cache/revealjs/legend-position-inside_f8cda353a129e4fcd92ae09905c267ae'}\n\n```{.r .cell-code  code-line-numbers=\"9\"}\nggplot(\n    bikes,\n    aes(x = temp_feel, y = count,\n        color = humidity)\n  ) +\n  geom_point() +\n  scale_color_viridis_c() +\n  theme(\n    legend.position = c(.25, .85)\n  )\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/legend-position-inside-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Legend Direction\n\n\n::: {.cell output-location='column' hash='05-layout_cache/revealjs/legend-position-inside-horizontal_7d5b8ee437189cf08db039bca08f945a'}\n\n```{.r .cell-code  code-line-numbers=\"10\"}\nggplot(\n    bikes,\n    aes(x = temp_feel, y = count,\n        color = humidity)\n  ) +\n  geom_point() +\n  scale_color_viridis_c() +\n  theme(\n    legend.position = c(.25, .85),\n    legend.direction = \"horizontal\"\n  )\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/legend-position-inside-horizontal-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Legend Types\n\n\n::: {.cell output-location='column' hash='05-layout_cache/revealjs/legend-guide-quotes_6d743631c89709d08bee1cd72e9f131e'}\n\n```{.r .cell-code  code-line-numbers=\"8\"}\nggplot(\n    bikes,\n    aes(x = temp_feel, y = count,\n        color = humidity)\n  ) +\n  geom_point() +\n  scale_color_viridis_c(\n    guide = \"colorbar\"\n  ) +\n  theme(\n    legend.position = c(.25, .85),\n    legend.direction = \"horizontal\"\n  )\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/legend-guide-quotes-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Legend Types\n\n\n::: {.cell output-location='column' hash='05-layout_cache/revealjs/legend-guide-quotes-colorsteps_8b5f2bf3aea5ab0944a9418e45178201'}\n\n```{.r .cell-code  code-line-numbers=\"8\"}\nggplot(\n    bikes,\n    aes(x = temp_feel, y = count,\n        color = humidity)\n  ) +\n  geom_point() +\n  scale_color_viridis_c(\n    guide = \"colorsteps\"\n  ) +\n  theme(\n    legend.position = c(.25, .85),\n    legend.direction = \"horizontal\"\n  )\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/legend-guide-quotes-colorsteps-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Legend Types\n\n\n::: {.cell output-location='column' hash='05-layout_cache/revealjs/legend-guide-binned-scale_3836011c86365a09778dfdd5fb89685d'}\n\n```{.r .cell-code  code-line-numbers=\"7\"}\nggplot(\n    bikes,\n    aes(x = temp_feel, y = count,\n        color = humidity)\n  ) +\n  geom_point() +\n  scale_color_viridis_b(\n    guide = \"colorsteps\"\n  ) +\n  theme(\n    legend.position = c(.25, .85),\n    legend.direction = \"horizontal\"\n  )\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/legend-guide-binned-scale-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Legend Types\n\n\n::: {.cell output-location='column' hash='05-layout_cache/revealjs/legend-guide-function-colorsteps_1c5902b848deaed6e65449034b19d6f3'}\n\n```{.r .cell-code  code-line-numbers=\"8\"}\nggplot(\n    bikes,\n    aes(x = temp_feel, y = count,\n        color = humidity)\n  ) +\n  geom_point() +\n  scale_color_viridis_b(\n    guide = guide_colorsteps()\n  ) +\n  theme(\n    legend.position = c(.25, .85),\n    legend.direction = \"horizontal\"\n  )\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/legend-guide-function-colorsteps-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Legend Styling\n\n\n::: {.cell output-location='column' hash='05-layout_cache/revealjs/legend-guide-function-adjust-title_c7613a4947bbaea972ee6d79ca7e341c'}\n\n```{.r .cell-code  code-line-numbers=\"9,10\"}\nggplot(\n    bikes,\n    aes(x = temp_feel, y = count,\n        color = humidity)\n  ) +\n  geom_point() +\n  scale_color_viridis_b(\n    guide = guide_colorsteps(\n      title.position = \"top\",\n      title.hjust = .5\n    )\n  ) +\n  theme(\n    legend.position = c(.25, .85),\n    legend.direction = \"horizontal\"\n  )\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/legend-guide-function-adjust-title-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Legend Styling\n\n\n::: {.cell output-location='column' hash='05-layout_cache/revealjs/legend-guide-function-customize_773e3a6cb20158a39a6b223e551f76c7'}\n\n```{.r .cell-code  code-line-numbers=\"11,12,13,14\"}\nggplot(\n    bikes,\n    aes(x = temp_feel, y = count,\n        color = humidity)\n  ) +\n  geom_point() +\n  scale_color_viridis_b(\n    guide = guide_colorsteps(\n      title.position = \"top\",\n      title.hjust = .5,\n      show.limits = TRUE,\n      frame.colour = \"black\",\n      frame.linewidth = 3,\n      barwidth = unit(8, \"lines\")\n    )\n  ) +\n  theme(\n    legend.position = c(.25, .85),\n    legend.direction = \"horizontal\"\n  )\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/legend-guide-function-customize-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Legend Styling\n\n\n::: {.cell output-location='column' hash='05-layout_cache/revealjs/legend-guide-function-customize-ticks_345682fa040f826e2b552a52bdfbc306'}\n\n```{.r .cell-code  code-line-numbers=\"19|7,10,16,17|8,9|13,14,15\"}\nggplot(\n    bikes,\n    aes(x = temp_feel, y = count,\n        color = humidity)\n  ) +\n  geom_point() +\n  scale_color_viridis_c(\n    breaks = 3:10*10,\n    limits = c(30, 100),\n    guide = guide_colorbar(\n      title.position = \"top\",\n      title.hjust = .5,\n      ticks.linewidth = 3,\n      barwidth = unit(20, \"lines\"),\n      barheight = unit(.6, \"lines\")\n    )\n  ) +\n  theme(\n    legend.position = \"top\"\n  )\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/legend-guide-function-customize-ticks-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Legend Styling\n\n\n::: {.cell output-location='column' hash='05-layout_cache/revealjs/legend-guide-function-customize-ticks-limits_e5b64786f9453b17b9724dfeff086938'}\n\n```{.r .cell-code  code-line-numbers=\"14,15\"}\nggplot(\n    bikes,\n    aes(x = temp_feel, y = count,\n        color = humidity)\n  ) +\n  geom_point() +\n  scale_color_viridis_c(\n    breaks = 3:10*10,\n    limits = c(30, 100),\n    guide = guide_colorbar(\n      title.position = \"top\",\n      title.hjust = .5,\n      ticks.linewidth = 3,\n      draw.ulim = FALSE,\n      draw.llim = FALSE,\n      barwidth = unit(20, \"lines\"),\n      barheight = unit(.6, \"lines\")\n    )\n  ) +\n  theme(\n    legend.position = \"top\"\n  )\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/legend-guide-function-customize-ticks-limits-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Legend Styling\n\n\n::: {.cell output-location='column' hash='05-layout_cache/revealjs/legend-guide-function-customize-ticks-no_b3fbff98078c826932e6a0b28efe6f38'}\n\n```{.r .cell-code  code-line-numbers=\"13\"}\nggplot(\n    bikes,\n    aes(x = temp_feel, y = count,\n        color = humidity)\n  ) +\n  geom_point() +\n  scale_color_viridis_c(\n    breaks = 3:10*10,\n    limits = c(30, 100),\n    guide = guide_colorbar(\n      title.position = \"top\",\n      title.hjust = .5,\n      ticks = FALSE,\n      barwidth = unit(20, \"lines\"),\n      barheight = unit(.6, \"lines\")\n    )\n  ) +\n  theme(\n    legend.position = \"top\"\n  )\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/legend-guide-function-customize-ticks-no-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Legend with Color Shading\n\n\n::: {.cell output-location='column' hash='05-layout_cache/revealjs/legend-shades_89f44a26e23ccf0e7ba57de18d983852'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3|5,6,7,8,9,10,11,12,13,14,15,16,17|18,19,20,21,22,23,24|25,26,27,28,29|30,31,32,33,34|35|36,37,38,39\"}\nlibrary(colorspace)\nshades <- c(lighten(pal, .3),\n                  darken(pal, .3))\n\ng <-\n  bikes %>%\n  arrange(day_night, date) %>%\n  mutate(\n    season_day = paste(\n      str_to_title(season), day_night\n    ),\n    season_day = forcats::fct_inorder(season_day)\n  ) %>%\n  ggplot(\n    aes(x = season, y = count,\n        fill = season_day)\n  ) +\n  stat_summary(\n    geom = \"col\", fun = sum,\n    position = position_dodge2(\n      width = .2, padding = .1\n    )\n  ) +\n  scale_fill_manual(\n    values = shades, name = NULL\n  ) +\n  scale_x_discrete(\n    labels = str_to_title\n  ) +\n  scale_y_continuous(\n    labels = scales::comma_format(),\n    expand = c(0, 0),\n    limits = c(NA, 4500000)\n  ) +\n  labs(x = NULL, y = \"Reported bike shares\") +\n  theme(\n    panel.grid.major.x = element_blank(),\n    axis.title = element_blank()\n  )\n\ng\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/legend-shades-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Legend on Top\n\n\n::: {.cell layout-align=\"center\" hash='05-layout_cache/revealjs/legend-shades-legend-top_25035fa0741f87f064c1870634b20cb4'}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\ng +\n  theme(legend.position = \"top\")\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/legend-shades-legend-top-1.png){fig-align='center' width=1800}\n:::\n:::\n\n\n\n\n## Resort Legend\n\n\n::: {.cell layout-align=\"center\" hash='05-layout_cache/revealjs/legend-shades-legend-byrow_58927cf9a7bf08a31549db4d216d75ff'}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\ng +\n  guides(fill = guide_legend(byrow = TRUE)) +\n  theme(legend.position = \"top\")\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/legend-shades-legend-byrow-1.png){fig-align='center' width=1800}\n:::\n:::\n\n\n\n\n## Key Glyphs\n\n\n::: {.cell output-location='column' hash='05-layout_cache/revealjs/legend-glyph-prep_2eb09d8f1212fa74788bee3fc05f0528'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4,5,6|7,8,9,10,11|12,13,14,15|16,17,18\"}\nggplot(\n    bikes,\n    aes(x = lubridate::week(date),\n        y = count,\n        color = day_night)\n  ) +\n  stat_summary(\n    geom = \"line\",\n    fun = sum,\n    size = 1\n  ) +\n  scale_color_manual(\n    values = c(\"#28A87D\", \"#663399\"),\n    name = NULL\n  ) +\n  theme(\n    legend.text = element_text(size = 16)\n  )\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/legend-glyph-prep-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Key Glyphs\n\n\n::: {.cell output-location='column' hash='05-layout_cache/revealjs/legend-glyph-timeseries_ca7759a0e398b3552b55dbb75079b95e'}\n\n```{.r .cell-code  code-line-numbers=\"10\"}\nggplot(\n    bikes,\n    aes(x = lubridate::week(date),\n        y = count,\n        color = day_night)\n  ) +\n  stat_summary(\n    geom = \"line\",\n    fun = sum,\n    key_glyph = \"timeseries\",\n    size = 1\n  ) +\n  scale_color_manual(\n    values = c(\"#28A87D\", \"#663399\"),\n    name = NULL\n  ) +\n  theme(\n    legend.text = element_text(size = 16)\n  )\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/legend-glyph-timeseries-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Key Glyphs\n\n\n::: {.cell output-location='column' hash='05-layout_cache/revealjs/legend-glyph-vline_8173a4c19c169acbc852d5ddeb27031d'}\n\n```{.r .cell-code  code-line-numbers=\"10\"}\nggplot(\n    bikes,\n    aes(x = lubridate::week(date),\n        y = count,\n        color = day_night)\n  ) +\n  stat_summary(\n    geom = \"line\",\n    fun = sum,\n    key_glyph = \"vline\",\n    size = 1\n  ) +\n  scale_color_manual(\n    values = c(\"#28A87D\", \"#663399\"),\n    name = NULL\n  ) +\n  theme(\n    legend.text = element_text(size = 16)\n  )\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/legend-glyph-vline-1.png){width=1000}\n:::\n:::\n\n\n\n\n# Composing ggplot's\n\n\n\n------------------------------------------------------------------------\n\n![Illustration by [Allison Horst](https://github.com/allisonhorst/stats-illustrations)](img/layout/ah_patchwork.jpg){fig-align=\"center\" fig-alt=\"Allison Horsts monster illustration of the patchwork extension package.\"}\n\n\n\n------------------------------------------------------------------------\n\n::: panel-tabset\n### Graphic\n\n\n::: {.cell hash='05-layout_cache/revealjs/patchwork-p1_80d3997b18756e0e2786f1bb1ef265ae'}\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/patchwork-p1-1.png){width=2000}\n:::\n:::\n\n\n### Code\n\n\n::: {.cell hash='05-layout_cache/revealjs/patchwork-p1_eab142edf9ddedc8e30343a29c56c611'}\n\n```{.r .cell-code}\ntheme_set(theme_minimal(base_size = 18, base_family = \"Pally\"))\ntheme_update(\n  text = element_text(family = \"Pally\"),\n  panel.grid = element_blank(),\n  axis.text = element_text(color = \"grey50\", size = 12),\n  axis.title = element_text(color = \"grey40\", face = \"bold\"),\n  axis.title.x = element_text(margin = margin(t = 12)),\n  axis.title.y = element_text(margin = margin(r = 12)),\n  axis.line = element_line(color = \"grey80\", size = .4),\n  legend.text = element_text(color = \"grey50\", size = 12),\n  plot.tag = element_text(size = 40, margin = margin(b = 15)),\n  plot.background = element_rect(fill = \"white\", color = \"white\")\n)\n\nbikes_sorted <-\n  bikes %>%\n  filter(!is.na(weather_type)) %>%\n  group_by(weather_type) %>%\n  mutate(sum = sum(count)) %>%\n  ungroup() %>%\n  mutate(\n    weather_type = forcats::fct_reorder(\n      str_to_title(str_wrap(weather_type, 5)), sum\n    )\n  )\n\np1 <- ggplot(\n    bikes_sorted,\n    aes(x = weather_type, y = count, color = weather_type)\n  ) +\n  geom_hline(yintercept = 0, color = \"grey80\", size = .4) +\n  stat_summary(\n    geom = \"point\", fun = \"sum\", size = 12\n  ) +\n  stat_summary(\n    geom = \"linerange\", ymin = 0, fun.max = function(y) sum(y),\n    size = 2, show.legend = FALSE\n  ) +\n  coord_flip(ylim = c(0, NA), clip = \"off\") +\n  scale_y_continuous(\n    expand = c(0, 0), limits = c(0, 8500000),\n    labels = scales::comma_format(scale = .0001, suffix = \"K\")\n  ) +\n  scale_color_viridis_d(\n    option = \"magma\", direction = -1, begin = .1, end = .9, name = NULL,\n    guide = guide_legend(override.aes = list(size = 7))\n  ) +\n  labs(\n    x = NULL, y = \"Sum of reported bike shares\", tag = \"P1\",\n  ) +\n  theme(\n    axis.line.y = element_blank(),\n    axis.text.y = element_text(family = \"Pally\", color = \"grey50\", face = \"bold\",\n                               margin = margin(r = 15), lineheight = .9)\n  )\n\np1\n```\n:::\n\n:::\n\n\n\n------------------------------------------------------------------------\n\n::: panel-tabset\n### Graphic\n\n\n::: {.cell hash='05-layout_cache/revealjs/patchwork-p2_76c902d9eb5c507d53435ee3fb3eb7dc'}\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/patchwork-p2-1.png){width=2000}\n:::\n:::\n\n\n### Code\n\n\n::: {.cell hash='05-layout_cache/revealjs/patchwork-p2_a8867beca9ccb60ec6d2dcc10f8da2ae'}\n\n```{.r .cell-code}\np2 <- bikes_sorted %>%\n  filter(season == \"winter\", is_weekend == TRUE, day_night == \"night\") %>%\n  group_by(weather_type, .drop = FALSE) %>%\n  mutate(id = row_number()) %>%\n  ggplot(\n      aes(x = weather_type, y = id, color = weather_type)\n    ) +\n    geom_point(size = 4.5) +\n    scale_color_viridis_d(\n      option = \"magma\", direction = -1, begin = .1, end = .9, name = NULL,\n      guide = guide_legend(override.aes = list(size = 7))\n    ) +\n    labs(\n      x = NULL, y = \"Reported bike shares on\\nweekend winter nights\", tag = \"P2\",\n    ) +\n    coord_cartesian(ylim = c(.5, NA), clip = \"off\")\n\np2\n```\n:::\n\n:::\n\n\n\n------------------------------------------------------------------------\n\n::: panel-tabset\n### Graphic\n\n\n::: {.cell hash='05-layout_cache/revealjs/patchwork-p3_83b563f9401fdaa0a84f6ddaa8566711'}\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/patchwork-p3-1.png){width=2000}\n:::\n:::\n\n\n### Code\n\n\n::: {.cell hash='05-layout_cache/revealjs/patchwork-p3_249f1359075fd85592e7dd79cd970742'}\n\n```{.r .cell-code}\nmy_colors <- c(\"#cc0000\", \"#000080\")\n\np3 <- bikes %>%\n  group_by(week = lubridate::week(date), day_night, year) %>%\n  summarize(count = sum(count)) %>%\n  group_by(week, day_night) %>%\n  mutate(avg = mean(count)) %>%\n  ggplot(aes(x = week, y = count, group = interaction(day_night, year))) +\n    geom_line(color = \"grey65\", size = 1) +\n    geom_line(aes(y = avg, color = day_night), stat = \"unique\", size = 1.7) +\n    annotate(\n      geom = \"text\", label = c(\"Day\", \"Night\"), color = my_colors,\n      x = c(5, 18), y = c(125000, 29000), size = 8, fontface = \"bold\", family = \"Pally\"\n    ) +\n    scale_x_continuous(breaks = c(1, 1:10*5)) +\n    scale_y_continuous(labels = scales::comma_format()) +\n    scale_color_manual(values = my_colors, guide = \"none\") +\n    labs(\n      x = \"Week of the Year\", y = \"Reported bike shares\\n(cumulative # per week)\", tag = \"P3\",\n    )\n\np3\n```\n:::\n\n:::\n\n\n\n## {patchwork}\n\n\n::: {.cell layout-align=\"center\" hash='05-layout_cache/revealjs/patchwork-composition_b65195eb4da2f485d98370a21cae8979'}\n\n```{.r .cell-code  code-line-numbers=\"3|2,3\"}\n# install.packages(\"patchwork\")\nlibrary(patchwork)\n(p1 + p2) / p3\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/patchwork-composition-1.png){fig-align='center' width=3000}\n:::\n:::\n\n\n\n\n## \"Collect Guides\"\n\n\n::: {.cell layout-align=\"center\" hash='05-layout_cache/revealjs/patchwork-composition-guides_669e09ad628f913b90ed1003af5f85ef'}\n\n```{.r .cell-code}\n(p1 + p2) / p3 + plot_layout(guides = \"collect\")\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/patchwork-composition-guides-1.png){fig-align='center' width=3000}\n:::\n:::\n\n\n\n\n## Apply Theming\n\n\n::: {.cell layout-align=\"center\" hash='05-layout_cache/revealjs/patchwork-composition-guides-just_628f648bcf7d4b476d764e7cff17d81c'}\n\n```{.r .cell-code}\n((p1 + p2) / p3 & theme(legend.justification = \"top\")) + plot_layout(guides = \"collect\")\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/patchwork-composition-guides-just-1.png){fig-align='center' width=3000}\n:::\n:::\n\n\n\n\n## Apply Theming\n\n\n::: {.cell layout-align=\"center\" hash='05-layout_cache/revealjs/patchwork-composition-legend-off_2570e8b57b2016556d0d968b27c8c0a5'}\n\n```{.r .cell-code}\n(p1 + p2) / p3 & theme(legend.position = \"none\", plot.background = element_rect(color = \"black\", size = 3))\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/patchwork-composition-legend-off-1.png){fig-align='center' width=3000}\n:::\n:::\n\n\n\n\n## Adjust Widths and Heights\n\n\n::: {.cell layout-align=\"center\" hash='05-layout_cache/revealjs/patchwork-composition-heights-widths_3bb0383ba7bbbd5f0942aa8e0f42d6aa'}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\n((p1 + p2) / p3 & theme(legend.position = \"none\")) +\n  plot_layout(heights = c(.2, .1), widths = c(2, 1))\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/patchwork-composition-heights-widths-1.png){fig-align='center' width=3000}\n:::\n:::\n\n\n\n\n## Use A Custom Layout\n\n\n::: {.cell layout-align=\"center\" hash='05-layout_cache/revealjs/patchwork-composition-design_28981d3190f5f6fcbd2379dd337fd581'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4|5\"}\npicasso <- \"\nAAAAAA#BBBB\nCCCCCCCCC##\nCCCCCCCCC##\"\n(p1 + p2 + p3 & theme(legend.position = \"none\")) + plot_layout(design = picasso)\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/patchwork-composition-design-1.png){fig-align='center' width=3000}\n:::\n:::\n\n\n\n\n## Add Labels\n\n\n::: {.cell hash='05-layout_cache/revealjs/patchwork-composition-labs-prep_9063651745c5d9dfabac295e2f8a8e30'}\n\n```{.r .cell-code}\npl1 <- p1 + labs(tag = NULL, title = \"Plot One\") + theme(legend.position = \"none\")\npl2 <- p2 + labs(tag = NULL, title = \"Plot Two\") + theme(legend.position = \"none\")\npl3 <- p3 + labs(tag = NULL, title = \"Plot Three\") + theme(legend.position = \"none\")\n```\n:::\n\n\n\n\n## Add Labels\n\n\n::: {.cell layout-align=\"center\" hash='05-layout_cache/revealjs/patchwork-composition-labs_3710513ac0d04d2ef4ce66d12a37483a'}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\n(pl1 + pl2) / pl3 +\n  plot_annotation(tag_levels = \"1\", tag_prefix = \"P\", title = \"An overarching title for all 3 plots, placed on the very top while all other titles are sitting below the tags.\")\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/patchwork-composition-labs-1.png){fig-align='center' width=3000}\n:::\n:::\n\n\n\n\n## Add Text\n\n::: panel-tabset\n### Graphic\n\n\n::: {.cell layout-align=\"center\" hash='05-layout_cache/revealjs/patchwork-composition-textbox-prep_bcc7d28e59e3775877c188623c65f7ab'}\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/patchwork-composition-textbox-prep-1.png){fig-align='center' width=1800}\n:::\n:::\n\n\n\n\n### Code\n\n\n::: {.cell hash='05-layout_cache/revealjs/patchwork-composition-textbox-prep_ae1e87ba0517d88a3fd814fa0386ef5d'}\n\n```{.r .cell-code}\ntext <- tibble(\n  x = 0, y = 0, label = \"Lorem ipsum dolor sit amet, **consectetur adipiscing elit**, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation <b style='color:#000080;'>ullamco laboris nisi</b> ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat <b style='color:#cc0000;'>cupidatat non proident</b>, sunt in culpa qui officia deserunt mollit anim id est laborum.\"\n)\n\npt <- ggplot(text, aes(x = x, y = y)) +\n  ggtext::geom_textbox(\n    aes(label = label),\n    box.color = NA, width = unit(23, \"lines\"),\n    family = \"Pally\", color = \"grey40\", size = 6.5, lineheight = 1.4\n  ) +\n  coord_cartesian(expand = FALSE, clip = \"off\") +\n  theme_void()\n\npt\n```\n:::\n\n:::\n\n\n\n## Add Text\n\n\n::: {.cell layout-align=\"center\" hash='05-layout_cache/revealjs/patchwork-composition-textbox_df24fb5532c4bd270f90434dd1575504'}\n\n```{.r .cell-code}\n(p1 + pt) / p3\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/patchwork-composition-textbox-1.png){fig-align='center' width=3000}\n:::\n:::\n\n\n\n\n## Add Inset Plots\n\n\n::: {.cell layout-align=\"center\" hash='05-layout_cache/revealjs/patchwork-composition-inset-1_de2a55f9a9bec897589b53481361dd5f'}\n\n```{.r .cell-code}\npl1 + inset_element(pl2, l = .6, b = .1, r = 1, t = .6)\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/patchwork-composition-inset-1-1.png){fig-align='center' width=2400}\n:::\n:::\n\n\n\n\n## Add Inset Plots\n\n\n::: {.cell layout-align=\"center\" hash='05-layout_cache/revealjs/patchwork-composition-inset-2_d950275ac02c26f3bc244b24538308e8'}\n\n```{.r .cell-code}\npl1 + inset_element(pl2, l = .6, b = 0, r = 1, t = .5, align_to = 'full')\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/patchwork-composition-inset-2-1.png){fig-align='center' width=2400}\n:::\n:::\n\n\n\n\n## Add Inset Plots\n\n\n::: {.cell layout-align=\"center\" hash='05-layout_cache/revealjs/patchwork-composition-inset-3_da1a9e16e5d56d57911cf288d982d9b8'}\n\n```{.r .cell-code}\n(pl1 + inset_element(pl2, l = .6, b = .1, r = 1, t = .6) + pt) / pl3\n```\n\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/patchwork-composition-inset-3-1.png){fig-align='center' width=3000}\n:::\n:::\n\n\n\n\n## <b style='color:#663399;'>Recap</b>\n\n::: recap\n::: incremental\n-  **guides** are the combination of scales and legends\n-  legends can be either modified with the **`guide_*`** function in **`scale_*()`** or **`guides()`**  and with the **`theme()`** component\nqualitative\n-  ... while quantitative guides are **`colorbar`**, **`colorsteps`** or **`bins`**\n-  **`{patchwork}`** is the most modern and simplest way to compose plots\n    -  use `+`, `/` and `|` to combine plots\n    -  use `plot_layout()` to adjust the layout, widths and heights\n    -  use `plot_annotation()` to add tags and general labels\n    - use `inset_element()` to add inset graphics\n:::\n:::\n\n\n\n# Exercises\n\n\n\n## Exercise 1\n\n::: question\n-   **Create the following penguins visualization, as close as possible**.\n:::\n\n\n::: {.cell hash='05-layout_cache/revealjs/exercise-1-penguins_db5d601ce99b0b16badf61b57b405014'}\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/exercise-1-penguins-1.png){fig-pos='center' width=2600}\n:::\n:::\n\n\n\n\n## Exercise 2\n\n::: question\n-   **Create the following gapminder visualization, as close as possible**.\n:::\n\n\n::: {.cell hash='05-layout_cache/revealjs/exercise-2-gapminder_03f9b0005133de67aa896a152bcc33fa'}\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/exercise-2-gapminder-1.png){fig-pos='center' width=2600}\n:::\n:::\n\n\n\n---\n\n![](https://s3.eu-west-1.amazonaws.com/static.gapminder.org/GapminderMedia/wp-uploads/20161215191134/countries_health_wealth_2016_v13.jpg){fig-align=\"center\" fig-width=\"35%\" fig-alt=\"An updated version of the gapminder visualization as a poster, showing the 2015 data in a new design.\"}\n\n\n\n# Solution Exercise 1 {background-color=\"#e6d9f2\"}\n\n\n\n## Exercise 1\n\n::: question\n-   **Create the following penguins visualization, as close as possible**.\n:::\n\n\n::: {.cell hash='05-layout_cache/revealjs/exercise-1-penguins_db5d601ce99b0b16badf61b57b405014'}\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/exercise-1-penguins-1.png){fig-pos='center' width=2600}\n:::\n:::\n\n\n\n\n## Prepare the Data Set\n\n\n::: {.cell hash='05-layout_cache/revealjs/prepare-data-exercise_650faeaf9e1ab39d94a336d993b4b177'}\n\n```{.r .cell-code}\nlibrary(palmerpenguins)\n\npenguin_cols <- c(\"#FF8C00\", \"#159090\", \"#A034F0\")\n\npenguins$species <- factor(penguins$species, levels = c(\"Adelie\", \"Gentoo\", \"Chinstrap\"))\n```\n:::\n\n\n\n\n## Prepare Theming\n\n\n::: {.cell hash='05-layout_cache/revealjs/prepare-theme-exercise_971f49008500396967a7ce4b2768cab5'}\n\n```{.r .cell-code}\ntheme_set(theme_minimal(\n  base_size = 16, base_family = \"Asap SemiCondensed\"\n))\n\ntheme_update(\n  plot.title = ggtext::element_textbox_simple(\n    size = 20, margin = margin(15, 0, 15, 0),\n    padding = margin(rep(12, 4)), fill = \"grey90\"\n  ),\n  plot.title.position = \"plot\",\n  plot.caption = ggtext::element_markdown(\n    size = 10, color = \"grey50\", margin = margin(12, 0, 6, 0)\n  ),\n  plot.caption.position = \"plot\",\n  plot.tag = element_text(margin = margin(b = 0, l = 15)),\n  plot.background = element_rect(color = \"#f8f8f8\", fill = \"#f8f8f8\"),\n  panel.grid.minor = element_blank(),\n  legend.position = \"none\",\n  axis.title.x = element_text(margin = margin(t = 10)),\n  axis.title.y = element_text(margin = margin(r = 10))\n)\n```\n:::\n\n\n\n\n## Create Bar Plot Species\n\n\n::: {.cell hash='05-layout_cache/revealjs/layout-exercise-ex-1-1_29dfce23b5a8f766368919b69e26675f'}\n\n```{.r .cell-code}\np1 <- ggplot(\n    penguins,\n    aes(x = species, fill = species)\n  ) +\n  geom_bar() +\n  stat_count(\n    geom = \"text\",\n    aes(label = stat(count)),\n    vjust = 1.5, size = 5, color = \"white\", \n    family = \"Tabular\", fontface = \"bold\"\n  ) +\n  scale_y_continuous(\n    expand = c(0, 0),\n    guide = \"none\",\n    limits = c(0, 168)\n  ) +\n  scale_fill_manual(\n    values = penguin_cols\n  ) +\n  labs(\n    x = \"Pygoscelis spec.\", y = NULL \n  ) +\n  theme(\n    panel.grid.major = element_blank(),\n    axis.title.x = element_text(face = \"italic\")\n  )\n\np1\n```\n:::\n\n\n\n\n## Create Bar Plot Species\n\n\n::: {.cell hash='05-layout_cache/revealjs/layout-exercise-ex-1-1_5518a4c06315ba4d4c988f7a965dca49'}\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/layout-exercise-ex-1-1-1.png){fig-pos='center' width=740}\n:::\n:::\n\n\n\n\n## Create Bar Plot Islands\n\n\n::: {.cell hash='05-layout_cache/revealjs/layout-exercise-ex-1-2_6328290f805ec6b679badd1507247a2b'}\n\n```{.r .cell-code}\np2 <- ggplot(\n    penguins,\n    aes(x = island, fill = island)\n  ) +\n  geom_bar() +\n  stat_count(\n    geom = \"text\",\n    aes(label = stat(count)),\n    vjust = 1.5, size = 5, color = \"white\", \n    family = \"Tabular\", fontface = \"bold\"\n  ) +\n  scale_y_continuous(\n    expand = c(0, 0),\n    guide = \"none\",\n    limits = c(0, 168)\n  ) +\n  scale_fill_manual(\n    values = c(\"#9294BE\", \"#D4B7A9\", \"#CF98A3\")\n  ) +\n  labs(\n    x = \"Island\", y = NULL \n  ) +\n  theme(panel.grid.major = element_blank())\n\np2\n```\n:::\n\n\n\n\n## Create Bar Plot Islands\n\n\n::: {.cell hash='05-layout_cache/revealjs/layout-exercise-ex-1-2_aae64d08e261772955e6d3f6f52131aa'}\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/layout-exercise-ex-1-2-1.png){fig-pos='center' width=740}\n:::\n:::\n\n\n\n\n## Create Scatter Plot\n\n\n::: {.cell hash='05-layout_cache/revealjs/layout-exercise-ex-1-3_be0360a8a391ff5c160b40ddeb16c4e8'}\n\n```{.r .cell-code}\np3 <- ggplot(\n    penguins,\n    aes(x = flipper_length_mm, y = body_mass_g, \n        color = species)\n  ) +\n  geom_point(size = 3.5, color = \"black\") + \n  geom_point(size = 3, color = \"white\") + \n  geom_point(size = 2, alpha = .3) + \n  stat_smooth(\n    method = \"lm\", se = FALSE,\n    show.legend = FALSE\n  ) +\n  coord_cartesian(\n    clip = \"off\", expand = FALSE, xlim = c(171, 232)\n  ) +\n  scale_x_continuous(\n    labels = function(x) paste(x, \"mm\")\n  ) +\n  scale_y_continuous(\n    labels = function(y) paste(y / 1000, \"kg\")\n  ) +\n  scale_color_manual(\n    values = `penguin_cols`\n  ) +\n  labs(\n    x = \"Flipper length\", y = \"Body mass\" \n  ) \n\np3\n```\n:::\n\n\n\n\n## Create Scatter Plot\n\n\n::: {.cell hash='05-layout_cache/revealjs/layout-exercise-ex-1-3_1381aafe4c1409030b94e016cc761f6b'}\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/layout-exercise-ex-1-3-1.png){fig-pos='center' width=1860}\n:::\n:::\n\n\n\n\n## Create Plot Composition\n\n\n::: {.cell hash='05-layout_cache/revealjs/layout-exercise-ex-1-4_a0c6c8a729fbb601b2b8ba8c0e46f68b'}\n\n```{.r .cell-code}\nlibrary(patchwork)\n\n((p1 / p2) | p3) +\n  plot_layout(widths = c(.4, 1)) + \n  plot_annotation(\n    title = \"Individual counts per species (A) and island (B) as well as the relationship of physiological metrics (C) for adult *Pygoscelis spec.* penguins, measured between 2007 and 2009 near Palmer Station, Antarctica.\", caption = \"Horst AM, Hill AP, Gorman KB (2020). <span style='font-family:tabular;'>palmerpenguins</span> R package version 0.1.0\",\n    tag_levels = \"A\", tag_suffix = \".\"\n  )\n```\n:::\n\n\n\n\n## Create Plot Composition\n\n\n::: {.cell hash='05-layout_cache/revealjs/layout-exercise-ex-1-4_63f6526b441a987e86230ce0493c240d'}\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/layout-exercise-ex-1-4-1.png){fig-pos='center' width=1000}\n:::\n:::\n\n\n\n\n# Solution Exercise 2 {background-color=\"#e6d9f2\"}\n\n\n\n## Exercise 2\n\n::: question\n-   **Create the following gapminder visualization, as close as possible**.\n:::\n\n\n::: {.cell hash='05-layout_cache/revealjs/exercise-2-gapminder_03f9b0005133de67aa896a152bcc33fa'}\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/exercise-2-gapminder-1.png){fig-pos='center' width=2600}\n:::\n:::\n\n\n\n## The Data\n\n<b style='font-size:2.3rem;'>The famous [Gapminder](https://www.gapminder.org/) data set</b>\n\n-   life expectancy, GDP per capita, and population by country\n-   contains complete data covering the years 1952-2007 in 5-year steps\n\n\n::: {.cell hash='05-layout_cache/revealjs/data-import-gapminder_111bc6e7268aa4d3505b278df2875c48'}\n\n```{.r .cell-code}\nlibrary(gapminder)\n\ngapminder\n```\n\n::: {.cell-output .cell-output-stdout}\n```{.hscroll}\n# A tibble: 1,704 × 6\n   country     continent  year lifeExp      pop gdpPercap\n   <fct>       <fct>     <int>   <dbl>    <int>     <dbl>\n 1 Afghanistan Asia       1952    28.8  8425333      779.\n 2 Afghanistan Asia       1957    30.3  9240934      821.\n 3 Afghanistan Asia       1962    32.0 10267083      853.\n 4 Afghanistan Asia       1967    34.0 11537966      836.\n 5 Afghanistan Asia       1972    36.1 13079460      740.\n 6 Afghanistan Asia       1977    38.4 14880372      786.\n 7 Afghanistan Asia       1982    39.9 12881816      978.\n 8 Afghanistan Asia       1987    40.8 13867957      852.\n 9 Afghanistan Asia       1992    41.7 16317921      649.\n10 Afghanistan Asia       1997    41.8 22227415      635.\n# ℹ 1,694 more rows\n```\n:::\n:::\n\n\n\n\n## Data Preparation\n\n\n::: {.cell hash='05-layout_cache/revealjs/data-subset-1-print_27f855dbc01b8e48fdffb90a58d080ba'}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\n(gm2007 <- filter(gapminder, year == 2007))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 142 × 6\n   country     continent  year lifeExp       pop gdpPercap\n   <fct>       <fct>     <int>   <dbl>     <int>     <dbl>\n 1 Afghanistan Asia       2007    43.8  31889923      975.\n 2 Albania     Europe     2007    76.4   3600523     5937.\n 3 Algeria     Africa     2007    72.3  33333216     6223.\n 4 Angola      Africa     2007    42.7  12420476     4797.\n 5 Argentina   Americas   2007    75.3  40301927    12779.\n 6 Australia   Oceania    2007    81.2  20434176    34435.\n 7 Austria     Europe     2007    79.8   8199783    36126.\n 8 Bahrain     Asia       2007    75.6    708573    29796.\n 9 Bangladesh  Asia       2007    64.1 150448339     1391.\n10 Belgium     Europe     2007    79.4  10392226    33693.\n# ℹ 132 more rows\n```\n:::\n:::\n\n\n\n\n## Basic Bubble Plot\n\n\n::: {.cell hash='05-layout_cache/revealjs/basic-ggplot-gapminder_6a610b4cd29a818e1d40adcd40fc653a'}\n\n```{.r .cell-code  code-line-numbers=\"1|2,3|4\"}\nggplot(data = gm2007) + \n  aes(x = log10(gdpPercap), y = lifeExp, \n      color = continent, size = pop) +\n  geom_point(alpha = .5) \n```\n:::\n\n\n\n---\n\n\n::: {.cell hash='05-layout_cache/revealjs/basic-ggplot-gapminder_6051316940db32e45955e44cfe6f94c0'}\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/basic-ggplot-gapminder-1.png){fig-pos='center' width=2800}\n:::\n:::\n\n\n\n\n## Adjust Scales\n\n\n::: {.cell hash='05-layout_cache/revealjs/polished-ggplot-gapminder-scales_e69a84d86fb773099e70288376829505'}\n\n```{.r .cell-code  code-line-numbers=\"4,5|6,7|8,9\"}\nggplot(gm2007, aes(x = gdpPercap, y = lifeExp,\n                   color = continent, size = pop)) +\n  geom_point(alpha = .5, stroke = .5) +\n  scale_x_log10(breaks = c(500, 1000, 2000, 4000, 8000, 16000, 32000),\n                labels = scales::label_dollar(accuracy = 1), name = \"GDP per capita\") +\n  scale_color_manual(values = continent_colors, name = \"Region:\",\n                     guide = guide_legend(override.aes = list(size = 5))) +\n  scale_size(range = c(3, 30), name = \"Population:\", breaks = c(10, 100, 1000)*1000000, \n             labels = scales::label_comma(scale = 1 / 10^6, suffix = \"M\"))\n```\n:::\n\n\n\n---\n\n\n::: {.cell hash='05-layout_cache/revealjs/polished-ggplot-gapminder-scales_dda4e94b4de86d6d34361e0e48554820'}\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/polished-ggplot-gapminder-scales-1.png){fig-pos='center' width=2800}\n:::\n:::\n\n\n\n\n## Turn Clipping Off\n\n\n::: {.cell hash='05-layout_cache/revealjs/polished-ggplot-gapminder-coord_9e263143aa707473ab47ce1b11f245ca'}\n\n```{.r .cell-code  code-line-numbers=\"11|1\"}\ngm <-\n  ggplot(gm2007, aes(x = gdpPercap, y = lifeExp,\n                   color = continent, size = pop)) +\n  geom_point(alpha = .5, stroke = .5) +\n  scale_x_log10(breaks = c(500, 1000, 2000, 4000, 8000, 16000, 32000),\n                labels = scales::label_dollar(accuracy = 1), name = \"GDP per capita\") +\n  scale_color_manual(values = continent_colors, name = \"Region:\",\n                     guide = guide_legend(override.aes = list(size = 5))) +\n  scale_size(range = c(3, 30), name = \"Population:\", breaks = c(10, 100, 1000)*1000000, \n             labels = scales::label_comma(scale = 1 / 10^6, suffix = \"M\")) +\n  coord_cartesian(expand = FALSE, clip = \"off\")\n\ngm\n```\n:::\n\n\n\n---\n\n\n::: {.cell hash='05-layout_cache/revealjs/polished-ggplot-gapminder-coord_8e7469ed301f16fcb502e34798a8e88d'}\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/polished-ggplot-gapminder-coord-1.png){fig-pos='center' width=2800}\n:::\n:::\n\n\n\n\n## Polish Plot\n\n\n::: {.cell hash='05-layout_cache/revealjs/polished-ggplot-gapminder-labs-theme_111e1ef3f14f79f32a86df9430e291e2'}\n\n```{.r .cell-code  code-line-numbers=\"2,3|4|5,6,7,8,9,10\"}\ng +\n  labs(y = \"Life expectancy\", title = \"Health & Income of Nations in 2007\", \n       caption = \"Source: Gapminder project\") +\n  theme_minimal(base_family = \"Roboto Condensed\", base_size = 20) +\n  theme(panel.grid.minor = element_blank(),\n        plot.title = element_text(face = \"bold\", hjust = .5, size = rel(1.7), family = \"Hepta Slab\"),\n        plot.title.position = \"plot\",\n        legend.position = c(.9, .35),\n        legend.background = element_rect(color = \"grey87\"),\n        legend.box.just = \"right\",\n        plot.margin = margin(25, 40, 25, 25))\n```\n:::\n\n\n\n---\n\n\n::: {.cell hash='05-layout_cache/revealjs/polished-ggplot-gapminder-labs-theme_f5eeaa9cb34d0c1d48e55221bd7bf7b8'}\n::: {.cell-output-display}\n![](05-layout_files/figure-revealjs/polished-ggplot-gapminder-labs-theme-1.png){width=2800}\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}