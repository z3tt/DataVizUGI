{
  "hash": "6a28d6b36e5072facb1082f4299630ab",
  "result": {
    "markdown": "---\ntitle: \"The Art & Science of<br>Data Visualization\"\nsubtitle: \"<span style='font-size:1.5em;'>Engaging and Reproducible Graphics with ggplot2</span><br><span style='font-weight:500;font-size:1.3em;'>Concepts of the Layered Grammar of Graphics (Pt. 2)</span></span>\"\nauthor: \"<b style='color:#28a87d;'><a href='https://www.cedricscherer.com'>Dr. Cédric Scherer</a></b>&ensp;**//**&ensp;RTG-UGI Workshop&ensp;**//**&ensp;October 2023\"\nformat:\n  revealjs:\n    theme: slides.scss\n    logo: img/logo.png\n    footer: '**[Cédric Scherer](https://cedricscherer.com)** // Data Visualization & Information Design'\n    transition: fade\n    progress: true\n    multiplex: false\n    preview-links: true\n    scrollable: false\n    hide-inactive-cursor: true\n    highlight-style: printing\n    chalkboard:\n      theme: whiteboard\n      boardmarker-width: 4\n      buttons: true\n    pause: true\n    mainfont: Asap SemiCondensed\neditor: source\nknitr:\n  opts_chunk:\n    dev: \"ragg_png\"\n    retina: 3\n    dpi: 200\nexecute:\n  freeze: auto\n  cache: true\n  echo: true\n  fig-width: 5\n  fig-height: 6\n---\n\n\n\n\n## The Components of a ggplot\n\n\n<br>\n<table style='width:100%;font-size:16pt;'>\n  <tr>\n    <th>Component</th>\n    <th>Function</th>\n    <th>Explanation</th>\n  </tr>\n  <tr>\n    <td><b style='color:#67676;'>Data</b></td>\n    <td><code>ggplot(data)</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>\n    <td>*The raw data that you want to visualize (initialising a plot).*</td>\n  </tr>\n  <tr>\n    <td><b style='color:#67676;'>Aesthetics&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></td>\n    <td><code>aes()</code></td>\n    <td>*The mapping between variables and visual properties.*</td>\n  <tr>\n    <td><b style='color:#67676;'>Geometries</b></td>\n    <td><code>geom_*()</code></td>\n    <td>*The geometric shape of a layer representing the data.*</td>\n  </tr>\n  <tr>\n    <td><b style='color:#67676;'>Statistics</b></td>\n    <td><code>stat_*()</code></td>\n    <td>*The statistical transformation of a layer applied to the data.*</td>\n  </tr>\n  <tr>\n    <td><b style='color:#67676;'>Scales</b></td>\n    <td><code>scale_*()</code></td>\n    <td>*The representation of mapped aesthetic attributes.*</td>\n  </tr>\n  <tr>\n    <td><b style='color:#67676;'>Coordinate System</b></td>\n    <td><code>coord_*()</code></td>\n    <td>*The transformation to map data coordinates into the plot plane.*</td>\n  </tr>\n  <tr>\n    <td><b style='color:#67676;'>Facets</b></td>\n    <td><code>facet_*()</code></td>\n    <td>*The arrangement of the data into a set of small multiples.*</td>\n  </tr>\n  <tr>\n    <td><b style='color:#67676;'>Visual Themes</b></td>\n    <td><code>theme() | theme_*()</code></td>\n    <td>*The overall visual defaults of non-data elements of the graphic.*</td>\n  </tr>\n</table>\n\n\n\n## Preparation\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"1,2|4,5,6,7|9|11|13,14,15,16,17,18\"}\nlibrary(ggplot2)\nlibrary(dplyr)\n\nbikes <- readr::read_csv(\n  here::here(\"data\", \"london-bikes-custom.csv\"),\n  col_types = \"Dcfffilllddddc\"\n)\n\nbikes$season <- forcats::fct_inorder(bikes$season)\n\ntheme_set(theme_light(base_size = 14, base_family = \"Asap SemiCondensed\"))\n\ntheme_update(\n  panel.grid.minor = element_blank(),\n  plot.title = element_text(face = \"bold\"),\n  legend.position = \"top\",\n  plot.title.position = \"plot\"\n)\n```\n:::\n\n\n\n\n# Facets\n\n\n\n## Facets\n\n<br>\n\n<b class='simple-highlight-grn' style='font-size:2.6rem;'>= split variables to multiple panels</b><br><br>\n\n::: fragment\nFacets are also known as:\n\n-   small multiples\n-   trellis graphs\n-   lattice plots\n-   conditioning\n:::\n\n\n\n------------------------------------------------------------------------\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/facet-types-wrap_a37181a67e290f61517799657edc9f5b'}\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/facet-types-wrap-1.png){width=1000}\n:::\n:::\n\n\n::: fragment\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/facet-types-grid_7c161222547565590c6014da5839b5dc'}\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/facet-types-grid-1.png){width=1000}\n:::\n:::\n\n:::\n:::\n\n\n\n## Setup\n\n\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/facet-setup_838d41957d7f3b4a3fc86c96a13fd6a4'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4,5,6,7,8,9,10|12\"}\ng <-\n  ggplot(\n    bikes,\n    aes(x = temp, y = count,\n        color = season)\n  ) +\n  geom_point(\n    alpha = .3,\n    guide = \"none\"\n  )\n\ng\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/facet-setup-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Wrapped Facets\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/facet-wrap_141c1dacb5d58e86b93c5f854c925290'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4|2,4|3\"}\ng +\n  facet_wrap(\n    vars(day_night)\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/facet-wrap-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Wrapped Facets\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/facet-wrap-circumflex_798ecc92223de0d167b95a452b785006'}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\ng +\n  facet_wrap(\n    ~ day_night\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/facet-wrap-circumflex-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Facet Multiple Variables\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/facet-wrap-multiple_31305244a7dac0fcfbd0c8ecb4b74346'}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\ng +\n  facet_wrap(\n    ~ is_workday + day_night\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/facet-wrap-multiple-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Facet Labellers\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/facet-wrap-labels-1_3dd11929b54e0551c5fd49d3586a0514'}\n\n```{.r .cell-code  code-line-numbers=\"4\"}\ng +\n  facet_wrap(\n    ~ is_workday + day_night,\n    labeller = label_both\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/facet-wrap-labels-1-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Facet Labellers\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/facet-wrap-labels-2_5615fb74e147754747ed1d1477cd3b71'}\n\n```{.r .cell-code  code-line-numbers=\"4,7|5,6\"}\ng +\n  facet_wrap(\n    ~ is_workday + day_night,\n    labeller = labeller(\n      day_night = stringr::str_to_title,\n      is_workday = label_both\n    )\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/facet-wrap-labels-2-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Facet Labellers\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/facet-wrap-labels-3_07af52da8480ca452691964290b53e16'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4|10,11\"}\ncodes <- c(\n  `TRUE` = \"Workday\",\n  `FALSE` = \"Weekend or Holiday\"\n)\n\ng +\n  facet_wrap(\n    ~ is_workday + day_night,\n    labeller = labeller(\n      day_night = stringr::str_to_title,\n      is_workday = codes\n    )\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/facet-wrap-labels-3-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Facet Labellers\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/facet-wrap-labels-4_ebffb77a47b4d315258b61c370667e03'}\n\n```{.r .cell-code  code-line-numbers=\"10\"}\ncodes <- c(\n  `TRUE` = \"Workday\",\n  `FALSE` = \"Weekend or Holiday\"\n)\n\ng +\n  facet_wrap(\n    ~ is_workday + day_night,\n    labeller = labeller(\n      .default = stringr::str_to_title,\n      is_workday = codes\n    )\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/facet-wrap-labels-4-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Facet Options: Cols + Rows\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/facet-wrap-options-ncol_9ba0756bb6fd35e33dd49500f7def01f'}\n\n```{.r .cell-code  code-line-numbers=\"4\"}\ng +\n  facet_wrap(\n    ~ day_night,\n    ncol = 1\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/facet-wrap-options-ncol-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Facet Options: Free Scaling\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/facet-wrap-options-scales_1740ebcf0d5ddddebaefc355020ababb'}\n\n```{.r .cell-code  code-line-numbers=\"5\"}\ng +\n  facet_wrap(\n    ~ day_night,\n    ncol = 1,\n    scales = \"free\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/facet-wrap-options-scales-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Facet Options: Free Scaling\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/facet-wrap-options-freey_2cc68634bf43bdb52741b31fceec8fae'}\n\n```{.r .cell-code  code-line-numbers=\"5\"}\ng +\n  facet_wrap(\n    ~ day_night,\n    ncol = 1,\n    scales = \"free_y\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/facet-wrap-options-freey-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Facet Options: Switch Labels\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/facet-wrap-options-switch_d1576804c7d3d848caff45b5b0d1214c'}\n\n```{.r .cell-code  code-line-numbers=\"5\"}\ng +\n  facet_wrap(\n    ~ day_night,\n    ncol = 1,\n    switch = \"x\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/facet-wrap-options-switch-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Gridded Facets\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/facet-grid_ce58bc4b91355426d3e62116a8b14919'}\n\n```{.r .cell-code  code-line-numbers=\"2,5|3,4\"}\ng +\n  facet_grid(\n    rows = vars(day_night),\n    cols = vars(is_weekend)\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/facet-grid-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Gridded Facets\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/facet-grid-circumflex_3938edcd7a963e456d5b785b189f9639'}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\ng +\n  facet_grid(\n    day_night ~ is_weekend\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/facet-grid-circumflex-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Facet Multiple Variables\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/facet-grid-multiple_9beaf00daf2ec31ccaaf3caeb8a4e7b9'}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\ng +\n  facet_grid(\n    day_night ~ is_weekend + is_holiday\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/facet-grid-multiple-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Facet Labellers\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/facet-grid-labeller_599a1ca32df3b0436586f486f1fa317e'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4|6,7,8,9|14,15,16,17,18\"}\ncodes_weekend <- c(\n  `TRUE` = \"Weekend\",\n  `FALSE` = \"No weekend\"\n)\n\ncodes_holiday <- c(\n  `TRUE` = \"Holiday\",\n  `FALSE` = \"No holiday\"\n)\n\ng +\n  facet_grid(\n    day_night ~ is_weekend + is_holiday,\n    labeller = labeller(\n      day_night = stringr::str_to_title,\n      is_weekend = codes_weekend,\n      is_holiday = codes_holiday\n    )\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/facet-grid-labeller-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Facet Options: Free Scaling\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/facet-grid-options-scales_da375642d15846a6ab9d009df352ccb5'}\n\n```{.r .cell-code  code-line-numbers=\"4\"}\ng +\n  facet_grid(\n    day_night ~ is_weekend,\n    scales = \"free\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/facet-grid-options-scales-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Facet Options: Switch Labels\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/facet-grid-options-switch_92aba3f442839c42168ac61ee79cbc88'}\n\n```{.r .cell-code  code-line-numbers=\"5\"}\ng +\n  facet_grid(\n    day_night ~ is_weekend,\n    scales = \"free\",\n    switch = \"y\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/facet-grid-options-switch-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Facet Options: Proportional Spacing\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/facet-grid-options-space_cb2cf637db0aa33ea2354f127510cc45'}\n\n```{.r .cell-code  code-line-numbers=\"4,5|5\"}\ng +\n  facet_grid(\n    day_night ~ is_weekend,\n    scales = \"free\",\n    space = \"free\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/facet-grid-options-space-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Facet Options: Proportional Spacing\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/facet-grid-options-space-y_93e0ebed37a4d84f827492f4ed057bbe'}\n\n```{.r .cell-code  code-line-numbers=\"4,5\"}\ng +\n  facet_grid(\n    day_night ~ is_weekend,\n    scales = \"free_y\",\n    space = \"free_y\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/facet-grid-options-space-y-1.png){width=1000}\n:::\n:::\n\n\n\n\n# Exercise\n\n\n\n## Your Turn!\n\n::: question\n**Create the following facet from the `diamonds` data**.\n\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/exercise-facets_035fa7cee16e296801f32d1f0d0e1174'}\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/exercise-facets-1.png){width=1000}\n:::\n:::\n\n:::\n\n\n\n## Your Turn!\n\n::: question\n<b style=\"color:#1D785A;\">Bonus: Create this bloody-dark version.</b>\n\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/exercise-facets-bonus_0eefe3bc0c1db9e7e0f1c3ca8f8689a1'}\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/exercise-facets-bonus-1.png){width=1000}\n:::\n:::\n\n:::\n\n\n\n# Solution Exercise {background-color=\"#e6d9f2\"}\n\n\n## Diamonds Facet\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/diamonds-facet-start_0c27d51c55fc06589ce39bc5b5c2f4fc'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4|5,6,7|8,9,10,11\"}\nggplot(\n    diamonds,\n    aes(x = carat, y = price)\n  ) +\n  geom_point(\n    alpha = .3\n  ) +\n  geom_smooth(\n    se = FALSE,\n    color = \"dodgerblue\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/diamonds-facet-start-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Diamonds Facet\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/diamonds-facet_5b2e9bb512e922dfe1910c4c7f9c5ffc'}\n\n```{.r .cell-code  code-line-numbers=\"12,13,14,15,16\"}\nggplot(\n    diamonds,\n    aes(x = carat, y = price)\n  ) +\n  geom_point(\n    alpha = .3\n  ) +\n  geom_smooth(\n    se = FALSE,\n    color = \"dodgerblue\"\n  ) +\n  facet_grid(\n    cut ~ color,\n    space = \"free_x\",\n    scales = \"free_x\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/diamonds-facet-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Diamonds Facet (Dark Theme Bonus)\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/diamonds-facet-dark_b38014081ffe866e3bf85a153d8a892f'}\n\n```{.r .cell-code  code-line-numbers=\"18,19,20,21\"}\nggplot(\n    diamonds,\n    aes(x = carat, y = price)\n  ) +\n  geom_point(\n    alpha = .3,\n    color = \"white\"\n  ) +\n  geom_smooth(\n    se = FALSE,\n    color = \"dodgerblue\"\n  ) +\n  facet_grid(\n    cut ~ color,\n    space = \"free_x\",\n    scales = \"free_x\"\n  ) +\n  theme_dark(\n    base_size = 14,\n    base_family = \"Asap SemiCondensed\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/diamonds-facet-dark-1.png){width=1000}\n:::\n:::\n\n\n\n\n# Scales\n\n\n\n\n\n\n\n## Scales\n\n<br>\n\n<b class='simple-highlight-grn' style='font-size:2.6rem;'>= translate between variable ranges and property ranges</b><br><br>\n\n::: incremental\n-   feels-like temperature ⇄ x\n-   reported bike shares ⇄ y\n-   season ⇄ color\n-   year ⇄ shape\n-   ...\n:::\n\n\n\n## Scales\n\nThe `scale_*()` components control the properties of all the<br><b class='simple-highlight-ylw'>aesthetic dimensions mapped to the data.</b>\n\n<br>Consequently, there are `scale_*()` functions for all aesthetics such as:\n\n-   **positions** via `scale_x_*()` and `scale_y_*()`\n\n-   **colors** via `scale_color_*()` and `scale_fill_*()`\n\n-   **sizes** via `scale_size_*()` and `scale_radius_*()`\n\n-   **shapes** via `scale_shape_*()` and `scale_linetype_*()`\n\n-   **transparency** via `scale_alpha_*()`\n\n\n\n## Scales\n\nThe `scale_*()` components control the properties of all the<br><b class='simple-highlight-ylw'>aesthetic dimensions mapped to the data.</b>\n\n<br>The extensions (`*`) can be filled by e.g.:\n\n-   `continuous()`, `discrete()`, `reverse()`, `log10()`, `sqrt()`, `date()` for positions\n\n-   `continuous()`, `discrete()`, `manual()`, `gradient()`, `gradient2()` for colors\n\n-   `continuous()`, `discrete()`, `manual()`, `ordinal()`, `area()`, `date()` for sizes\n\n-   `continuous()`, `discrete()`, `manual()`, `ordinal()` for shapes\n\n-   `continuous()`, `discrete()`, `manual()`, `ordinal()`, `date()` for transparency\n\n\n\n------------------------------------------------------------------------\n\n![Illustration by [Allison Horst](https://github.com/allisonhorst/stats-illustrations)](img/concepts/continuous_discrete.png){fig-size=\"120%\" fig-align=\"center\" fig-alt=\"Allison Horsts illustration ofthe correct use of continuous versus discrete; however, in {ggplot2} these are interpeted in a different way: as quantitative and qualitative.\"}\n\n\n\n## Continuous vs. Discrete in {ggplot2}\n\n::: {layout-ncol=\"2\"}\n## Continuous:<br>quantitative or numerical data\n\n-   height\n-   weight\n-   age\n-   counts\n\n## Discrete:<br>qualitative or categorical data\n\n-   species\n-   sex\n-   study sites\n-   age group\n:::\n\n\n\n## Continuous vs. Discrete in {ggplot2}\n\n::: {layout-ncol=\"2\"}\n## Continuous:<br>quantitative or numerical data\n\n-   height (continuous)\n-   weight (continuous)\n-   age (continuous or discrete)\n-   counts (discrete)\n\n## Discrete:<br>qualitative or categorical data\n\n-   species (nominal)\n-   sex (nominal)\n-   study site (nominal or ordinal)\n-   age group (ordinal)\n:::\n\n\n\n## Aesthetics + Scales\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-default-invisible_fca3d998c2b76a471995bb171831dfab'}\n\n```{.r .cell-code  code-line-numbers=\"3,4\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-default-invisible-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Aesthetics + Scales\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-default_1a9935083644d166381fa0a189c75dec'}\n\n```{.r .cell-code  code-line-numbers=\"3,4,7,8,9|7,8,9\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_x_date() +\n  scale_y_continuous() +\n  scale_color_discrete()\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-default-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Scales\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-overwrite-1_c549e8a4b01da214e48f1ee5b795b442'}\n\n```{.r .cell-code  code-line-numbers=\"7\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_x_continuous() +\n  scale_y_continuous() +\n  scale_color_discrete()\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-overwrite-1-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Scales\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-overwrite-2_0fa2d7dd79013879cd29eea6ad5f08ef'}\n\n```{.r .cell-code  code-line-numbers=\"8\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_x_continuous() +\n  scale_y_log10() +\n  scale_color_discrete()\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-overwrite-2-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Scales\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-overwrite-3_12ec502c4bddd74d5ba70734161d064c'}\n\n```{.r .cell-code  code-line-numbers=\"9\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_x_continuous() +\n  scale_y_log10() +\n  scale_color_viridis_d()\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-overwrite-3-1.png){width=1000}\n:::\n:::\n\n\n\n\n## \\`scale_x\\|y_continuous\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-xy-continuous-trans_dd72aca1b6702806bbbab38eabf85e7a'}\n\n```{.r .cell-code  code-line-numbers=\"8,9,10|9\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +  \n  geom_point() +\n  scale_y_continuous(\n    trans = \"log10\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-xy-continuous-trans-1.png){width=1000}\n:::\n:::\n\n\n\n\n## \\`scale_x\\|y_continuous\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-xy-continuous-name_ae33e38e1341050023375de00185e239'}\n\n```{.r .cell-code  code-line-numbers=\"7,8,9|8\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_y_continuous(\n    name = \"Reported bike shares\"\n  ) \n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-xy-continuous-name-1.png){width=1000}\n:::\n:::\n\n\n\n\n## \\`scale_x\\|y_continuous\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-xy-continuous-breaks-seq_1fdd5cfb00bfebf3bdba08190d863df7'}\n\n```{.r .cell-code  code-line-numbers=\"9\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_y_continuous(\n    name = \"Reported bike shares\",\n    breaks = seq(0, 60000, by = 15000)\n  ) \n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-xy-continuous-breaks-seq-1.png){width=1000}\n:::\n:::\n\n\n\n\n## \\`scale_x\\|y_continuous\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-xy-continuous-breaks-short_968470cd962d7465c3dcf0956ebaf52e'}\n\n```{.r .cell-code  code-line-numbers=\"9\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_y_continuous(\n    name = \"Reported bike shares\",\n    breaks = 0:4*15000\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-xy-continuous-breaks-short-1.png){width=1000}\n:::\n:::\n\n\n\n\n## \\`scale_x\\|y_continuous\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-xy-continuous-breaks-irregular_417fa23270f9433133df6867bdf75fc4'}\n\n```{.r .cell-code  code-line-numbers=\"9\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_y_continuous(\n    name = \"Reported bike shares\",\n    breaks = c(0, 2:12*2500, 40000, 50000)\n  ) \n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-xy-continuous-breaks-irregular-1.png){width=1000}\n:::\n:::\n\n\n\n\n## \\`scale_x\\|y_continuous\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-xy-continuous-labels_ae4e8520e5f1e07c2c3ee0030414c57c'}\n\n```{.r .cell-code  code-line-numbers=\"8,10\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_y_continuous(\n    name = \"Reported bike shares in thousands\",\n    breaks = 0:4*15000,\n    labels = 0:4*15\n  ) \n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-xy-continuous-labels-1.png){width=1000}\n:::\n:::\n\n\n\n\n## \\`scale_x\\|y_continuous\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-xy-continuous-labels-paste_6deb3767ad449dab0bda1434bc839fd3'}\n\n```{.r .cell-code  code-line-numbers=\"10\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_y_continuous(\n    name = \"Reported bike shares in thousands\",\n    breaks = 0:4*15000,\n    labels = paste(0:4*15000, \"bikes\")\n  ) \n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-xy-continuous-labels-paste-1.png){width=1000}\n:::\n:::\n\n\n\n\n## \\`scale_x\\|y_continuous\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-xy-continuous-limits_37857234e79db4290edd148b75add067'}\n\n```{.r .cell-code  code-line-numbers=\"10\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_y_continuous(\n    name = \"Reported bike shares\",\n    breaks = 0:4*15000,\n    limits = c(NA, 60000)\n  ) \n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-xy-continuous-limits-1.png){width=1000}\n:::\n:::\n\n\n\n\n## \\`scale_x\\|y_continuous\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-xy-continuous-expand.no_a41553207022ecdb97e05c0668453965'}\n\n```{.r .cell-code  code-line-numbers=\"10\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_y_continuous(\n    name = \"Reported bike shares\",\n    breaks = 0:4*15000,\n    expand = c(0, 0)\n  ) \n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-xy-continuous-expand.no-1.png){width=1000}\n:::\n:::\n\n\n\n\n## \\`scale_x\\|y_continuous\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-xy-continuous-expand_b31f3942e8856d8050674b725851d701'}\n\n```{.r .cell-code  code-line-numbers=\"10\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_y_continuous(\n    name = \"Reported bike shares\",\n    breaks = -1:5*15000,\n    expand = c(.5, .5) ## c(add, mult)\n  ) \n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-xy-continuous-expand-1.png){width=1000}\n:::\n:::\n\n\n\n\n## \\`scale_x\\|y_continuous\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-xy-continuous-expand-add-explicit_7b49d96106a48be03177c6152b330864'}\n\n```{.r .cell-code  code-line-numbers=\"10\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_y_continuous(\n    name = \"Reported bike shares\",\n    breaks = -1:5*15000,\n    expand = expansion(add = 2000)\n  ) \n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-xy-continuous-expand-add-explicit-1.png){width=1000}\n:::\n:::\n\n\n\n\n## \\`scale_x\\|y_continuous\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-xy-continuous-guide-none_8b196a233af17190d3c58b6c42fc0c4f'}\n\n```{.r .cell-code  code-line-numbers=\"9\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_y_continuous(\n    name = \"Reported bike shares\",\n    guide = \"none\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-xy-continuous-guide-none-1.png){width=1000}\n:::\n:::\n\n\n\n\n## \\`scale_x\\|y_continuous\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-xy-duplicated_786351b60d30454ddc34a2b0991195d5'}\n\n```{.r .cell-code  code-line-numbers=\"3|7,8,9,10|9\"}\nggplot(\n    bikes,\n    aes(x = date, y = temp,\n        color = season)\n  ) +\n  geom_point() +\n  scale_y_continuous(\n    name = \"Temperature (°C)\",\n    sec.axis = dup_axis()\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-xy-duplicated-1.png){width=1000}\n:::\n:::\n\n\n\n\n## \\`scale_x\\|y_continuous\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-xy-secondary_284ef5c63032384d86b950f10ad9bc25'}\n\n```{.r .cell-code  code-line-numbers=\"9|10|11\"}\nggplot(\n    bikes,\n    aes(x = date, y = temp,\n        color = season)\n  ) +\n  geom_point() +\n  scale_y_continuous(\n    name = \"Temperature (°C)\",\n    sec.axis = sec_axis(\n      trans = ~ (. * 9/5) + 32,\n      name = \"Temperature (°F)\"\n    )\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-xy-secondary-1.png){width=1000}\n:::\n:::\n\n\n\n\n## \\`scale_x\\|y_date\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-xy-date-breaks-months_7b06435358966a4edc7e871f56a51560'}\n\n```{.r .cell-code  code-line-numbers=\"7,10|7,8,9,10|9\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_x_date(\n    name = NULL,\n    date_breaks = \"4 months\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-xy-date-breaks-months-1.png){width=1000}\n:::\n:::\n\n\n\n\n## \\`scale_x\\|y_date\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-xy-date-breaks-weeks_e859ffb95617708e0fc5d61279a2e1e4'}\n\n```{.r .cell-code  code-line-numbers=\"9\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_x_date(\n    name = NULL,\n    date_breaks = \"20 weeks\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-xy-date-breaks-weeks-1.png){width=1000}\n:::\n:::\n\n\n\n\n## \\`scale_x\\|y_date\\` with \\`strftime()\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-xy-date-labels_6d95db3b0c9a45a03fb5cde1f2a1a5a6'}\n\n```{.r .cell-code  code-line-numbers=\"9,10\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_x_date(\n    name = NULL,\n    date_breaks = \"6 months\",\n    date_labels = \"%Y/%m/%d\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-xy-date-labels-1.png){width=1000}\n:::\n:::\n\n\n\n\n## \\`scale_x\\|y_date\\` with \\`strftime()\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-xy-date-labels-special_1b87715a4ce42ef4fda14fc37d3a463c'}\n\n```{.r .cell-code  code-line-numbers=\"10\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_x_date(\n    name = NULL,\n    date_breaks = \"6 months\",\n    date_labels = \"%b '%y\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-xy-date-labels-special-1.png){width=1000}\n:::\n:::\n\n\n\n\n## \\`scale_x\\|y_discrete\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-xy-discrete_c7d7f91608b54bba24ecd652ccd95f61'}\n\n```{.r .cell-code  code-line-numbers=\"3,6,9|6,7,8,9|7,8\"}\nggplot(\n    bikes,\n    aes(x = season, y = count)\n  ) +\n  geom_boxplot() +\n  scale_x_discrete(\n    name = \"Period\",\n    labels = c(\"Dec-Feb\", \"Mar-May\", \"Jun-Aug\", \"Sep-Nov\")\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-xy-discrete-1.png){width=1000}\n:::\n:::\n\n\n\n\n## \\`scale_x\\|y_discrete\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-xy-discrete-expand_7d7715e256f4d0a7312d6473e8908ce4'}\n\n```{.r .cell-code  code-line-numbers=\"8\"}\nggplot(\n    bikes,\n    aes(x = season, y = count)\n  ) +\n  geom_boxplot() +\n  scale_x_discrete(\n    name = \"Season\",\n    expand = c(.5, 0) ## add, mult\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-xy-discrete-expand-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Discrete or Continuous?\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-xy-fake-discrete-no-group_ad29a2523fe8c8b8c8ca15478e9824d2'}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\nggplot(\n    bikes,\n    aes(x = as.numeric(season), y = count)\n  ) +\n  geom_boxplot()\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-xy-fake-discrete-no-group-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Discrete or Continuous?\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-xy-fake-discrete-visible_140edc8e4166b051162a07857339c1d1'}\n\n```{.r .cell-code  code-line-numbers=\"6\"}\nggplot(\n    bikes,\n    aes(x = as.numeric(season), y = count)\n  ) +\n  geom_boxplot(\n    aes(group = season)\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-xy-fake-discrete-visible-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Discrete or Continuous?\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-xy-fake-discrete_f4cf16179cacd9afd11ba0723bdcb600'}\n\n```{.r .cell-code  code-line-numbers=\"9,10,11,12,13|11|12\"}\nggplot(\n    bikes,\n    aes(x = as.numeric(season),\n        y = count)\n  ) +\n  geom_boxplot(\n    aes(group = season)\n  ) +\n  scale_x_continuous(\n    name = \"Season\",\n    breaks = 1:4,\n    labels = levels(bikes$season)\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-xy-fake-discrete-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Discrete or Continuous?\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-xy-fake-discrete-shift_da78c80ca4fc9bd25fd151059410111a'}\n\n```{.r .cell-code  code-line-numbers=\"3,4\"}\nggplot(\n    bikes,\n    aes(x = as.numeric(season) + \n            as.numeric(season) / 8,\n        y = count)\n  ) +\n  geom_boxplot(\n    aes(group = season)\n  ) +\n  scale_x_continuous(\n    name = \"Season\",\n    breaks = 1:4,\n    labels = levels(bikes$season)\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-xy-fake-discrete-shift-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Discrete or Continuous?\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-xy-fake-discrete-box-jitter_c129932853fa3f4a3e9c2e84001df93b'}\n\n```{.r .cell-code  code-line-numbers=\"3,4|7,11|6,7,8,9|10,11,12,13,14\"}\nggplot(\n    bikes,\n    aes(y = count,\n        group = season)\n  ) +\n  geom_boxplot(\n    aes(x = as.numeric(season) + .15),\n    width = .3\n  ) +\n  geom_jitter(\n    aes(x = as.numeric(season) - .15),\n    width = .1,\n    alpha = .3\n  ) +\n  scale_x_continuous(\n    name = \"Season\",\n    breaks = 1:4,\n    labels = levels(bikes$season)\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-xy-fake-discrete-box-jitter-1.png){width=1000}\n:::\n:::\n\n\n\n\n## \\`scale_color\\|fill_discrete\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-color-discrete-type-vector_e118a7c321fba584c126aa64326c5f44'}\n\n```{.r .cell-code  code-line-numbers=\"7,10|7,8,9,10|8,9\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_color_discrete(\n    name = \"Season:\",\n    type = c(\"#69b0d4\", \"#00CB79\", \"#F7B01B\", \"#a78f5f\")\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-color-discrete-type-vector-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Inspect Assigned Colors\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-color-discrete-type-inspect_7e9112bbf4f65bb99543f7d811df3f4c'}\n\n```{.r .cell-code  code-line-numbers=\"1|12|14\"}\ng <- ggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_color_discrete(\n    name = \"Season:\",\n    type = c(\"#3ca7d9\", \"#1ec99b\", \"#F7B01B\", \"#bb7e8f\")\n  )\n\ngb <- ggplot_build(g)\n\ngb$data[[1]][c(1:5, 200:205, 400:405), 1:5]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n     colour     x     y PANEL group\n1   #3ca7d9 16439  6830     1     1\n2   #3ca7d9 16439  2404     1     1\n3   #3ca7d9 16440 14763     1     1\n4   #3ca7d9 16440  5609     1     1\n5   #3ca7d9 16441 14501     1     1\n200 #1ec99b 16538  8830     1     2\n201 #1ec99b 16539 24019     1     2\n202 #1ec99b 16539 10500     1     2\n203 #1ec99b 16540 25640     1     2\n204 #1ec99b 16540 11830     1     2\n205 #1ec99b 16541 22216     1     2\n400 #F7B01B 16638 12079     1     3\n401 #F7B01B 16639 26646     1     3\n402 #F7B01B 16639 12446     1     3\n403 #F7B01B 16640 11312     1     3\n404 #F7B01B 16640  4722     1     3\n405 #F7B01B 16641 22748     1     3\n```\n:::\n:::\n\n\n\n\n## \\`scale_color\\|fill_discrete\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-color-discrete-type-vector-named_f9b0a72968e02a5422dbc64861787a54'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4,5,6|1,16\"}\nmy_colors <- c(\n  `winter` = \"#3c89d9\",\n  `spring` = \"#1ec99b\",\n  `summer` = \"#F7B01B\",\n  `autumn` = \"#a26e7c\"\n)\n\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_color_discrete(\n    name = \"Season:\",\n    type = my_colors\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-color-discrete-type-vector-named-1.png){width=1000}\n:::\n:::\n\n\n\n\n## \\`scale_color\\|fill_discrete\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-color-discrete-type-vector-named-shuffled_8279fb8c31ba69e5e9985ad54c026279'}\n\n```{.r .cell-code  code-line-numbers=\"2,5|1,16\"}\nmy_colors_alphabetical <- c(\n  `autumn` = \"#a26e7c\",\n  `spring` = \"#1ec99b\",\n  `summer` = \"#F7B01B\",\n  `winter` = \"#3c89d9\"\n)\n\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_color_discrete(\n    name = \"Season:\",\n    type = my_colors_alphabetical\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-color-discrete-type-vector-named-shuffled-1.png){width=1000}\n:::\n:::\n\n\n\n\n## \\`scale_color\\|fill_discrete\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-color-discrete-type-palette_c6d7d575941f002893973313eaf9847a'}\n\n```{.r .cell-code  code-line-numbers=\"1|11,12,13\"}\nlibrary(RColorBrewer)\n\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_color_discrete(\n    name = \"Season:\",\n    type = brewer.pal(\n      n = 4, name = \"Dark2\"\n    )\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-color-discrete-type-palette-1.png){width=1000}\n:::\n:::\n\n\n\n\n## \\`scale_color\\|fill_manual\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-color-manual-na_a6caa28071f874afdd26f1503f8a8c62'}\n\n```{.r .cell-code  code-line-numbers=\"4,9,10\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = weather_type)\n  ) +\n  geom_point() +\n  scale_color_manual(\n    name = NULL,\n    values = brewer.pal(n = 6, name = \"Pastel1\"),\n    na.value = \"black\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-color-manual-na-1.png){width=1000}\n:::\n:::\n\n\n\n\n## \\`scale_color\\|fill_carto_d\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-color-discrete-carto_4fe8e50e87b463fc44c2baa7ab4fe7a1'}\n\n```{.r .cell-code  code-line-numbers=\"7,8,9,10\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = weather_type)\n  ) +\n  geom_point() +\n  rcartocolor::scale_color_carto_d(\n    name = NULL,\n    palette = \"Pastel\",\n    na.value = \"black\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-color-discrete-carto-1.png){width=1000}\n:::\n:::\n\n\n\n\n## \\`scale_color\\|fill_continuous\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-color-continuous_6fc7f81ffa5ef97529a4538b2158030f'}\n\n```{.r .cell-code  code-line-numbers=\"4,7\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = temp)\n  ) +\n  geom_point() +\n  scale_color_continuous()\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-color-continuous-1.png){width=1000}\n:::\n:::\n\n\n## \\`scale_color\\|fill_continuous\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-color-continuous-viridis_04d3e6c666a3c124d7e21b24e3baaca3'}\n\n```{.r .cell-code  code-line-numbers=\"9\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = temp)\n  ) +\n  geom_point() +\n  scale_color_continuous(\n    name = \"Temperature:\",\n    type = \"viridis\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-color-continuous-viridis-1.png){width=1000}\n:::\n:::\n\n\n## \\`scale_color\\|fill_gradient\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-color-gradient_dc5c5f73ebeba66a3a268153d0dd44b9'}\n\n```{.r .cell-code  code-line-numbers=\"7,11|9,10\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = temp)\n  ) +\n  geom_point() +\n  scale_color_gradient(\n    name = \"Temperature:\",\n    low = \"grey90\",\n    high = \"#8b0023\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-color-gradient-1.png){width=1000}\n:::\n:::\n\n\n## \\`scale_color\\|fill_gradient2\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-color-gradient2_29266930903766812392025533b8ca58'}\n\n```{.r .cell-code  code-line-numbers=\"7,12|9,10,11\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = temp)\n  ) +\n  geom_point() +\n  scale_color_gradient2(\n    name = \"Temperature:\",\n    low = \"#28a87d\",\n    mid = \"grey90\",\n    high = \"#8b0023\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-color-gradient2-1.png){width=1000}\n:::\n:::\n\n\n## \\`scale_color\\|fill_gradient2\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-color-gradient2-midpoint_4cc7a2f5182044c4656d174077d600a2'}\n\n```{.r .cell-code  code-line-numbers=\"12\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = temp)\n  ) +\n  geom_point() +\n  scale_color_gradient2(\n    name = \"Temperature:\",\n    low = \"#28a87d\",\n    mid = \"grey90\",\n    high = \"#8b0023\",\n    midpoint = mean(bikes$temp)\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-color-gradient2-midpoint-1.png){width=1000}\n:::\n:::\n\n\n## \\`scale_color\\|fill_gradientn\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-color-gradientn_f8d499ef853bb9b978b9c9b99c550447'}\n\n```{.r .cell-code  code-line-numbers=\"7,10|9\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = temp)\n  ) +\n  geom_point() +\n  scale_color_gradientn(\n    name = \"Temperature:\",\n    colors = c(\"red\", \"orange\", \"green\", \"blue\")\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-color-gradientn-1.png){width=1000}\n:::\n:::\n\n\n## \\`scale_color\\|fill_viridis_c\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-color-viridis-c_c25b9ed08f28f73b00310f25be873e61'}\n\n```{.r .cell-code  code-line-numbers=\"7,10|9\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = temp)\n  ) +\n  geom_point() +\n  scale_color_viridis_c(\n    name = \"Temperature:\",\n    option = \"magma\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-color-viridis-c-1.png){width=1000}\n:::\n:::\n\n\n## \\`scale_color\\|fill_viridis_c\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-color-viridis-c-direction_8a723dc4932e90e7ec16282d67ab6b38'}\n\n```{.r .cell-code  code-line-numbers=\"10\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = temp)\n  ) +\n  geom_point() +\n  scale_color_viridis_c(\n    name = \"Temperature:\",\n    option = \"magma\",\n    direction = -1\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-color-viridis-c-direction-1.png){width=1000}\n:::\n:::\n\n\n## \\`scale_color\\|fill_viridis_c\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-color-viridis-c-range_034b95e17269b90214b19e1bc5cf427c'}\n\n```{.r .cell-code  code-line-numbers=\"11,12\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = temp)\n  ) +\n  geom_point() +\n  scale_color_viridis_c(\n    name = \"Temperature:\",\n    option = \"magma\",\n    direction = -1,\n    begin = .2,\n    end = .95\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-color-viridis-c-range-1.png){width=1000}\n:::\n:::\n\n\n## \\`scale_color\\|fill_distiller\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-color-distiller_aea5f08d419620036213d26022aa440f'}\n\n```{.r .cell-code  code-line-numbers=\"7,10|9\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = temp)\n  ) +\n  geom_point() +\n  scale_color_distiller(\n    name = \"Temperature:\",\n    palette = \"RdYlBu\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-color-distiller-1.png){width=1000}\n:::\n:::\n\n\n\n\n## {RColorBrewer}\n\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/color-palettes-brewer-show-all_0a47f19c822fb02c18b4dc6673e5eb42'}\n\n```{.r .cell-code}\nRColorBrewer::display.brewer.all()\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/color-palettes-brewer-show-all-1.png){width=2400}\n:::\n:::\n\n\n\n\n## {RColorBrewer}\n\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/color-palettes-brewer-show-cvd_5cbbdb6825a25a4c5852850babbcf395'}\n\n```{.r .cell-code}\nRColorBrewer::display.brewer.all(colorblindFriendly = TRUE)\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/color-palettes-brewer-show-cvd-1.png){width=2400}\n:::\n:::\n\n\n\n\n## \\`scale_color\\|fill_carto_c\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/scales-color-carto-c_c665790e99f33ea4197f3da6a6c612e7'}\n\n```{.r .cell-code  code-line-numbers=\"9,13|11,12\"}\n# install.packages(\"rcartocolor\")\n\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = temp)\n  ) +\n  geom_point() +\n  rcartocolor::scale_color_carto_c(\n    name = \"Temperature:\",\n    palette = \"ag_GrnYl\",\n    direction = -1\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scales-color-carto-c-1.png){width=1000}\n:::\n:::\n\n\n\n\n## {rcartocolor}\n\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/color-palettes-carto-show-all_46ce709f4194f885d1b351c67a7495b4'}\n\n```{.r .cell-code}\nrcartocolor::display_carto_all()\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/color-palettes-carto-show-all-1.png){width=2400}\n:::\n:::\n\n\n\n\n## {rcartocolor}\n\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/color-palettes-carto-show-cvd_fdf65c93e0a2404535280e2c629d07a2'}\n\n```{.r .cell-code}\nrcartocolor::display_carto_all(colorblind_friendly = TRUE)\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/color-palettes-carto-show-cvd-1.png){width=2400}\n:::\n:::\n\n\n\n\n## \\`scale_color\\|fill_scico\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/color-palettes-scico_9d0076f548dd20e93385fb255bbdb922'}\n\n```{.r .cell-code  code-line-numbers=\"9,13|11\"}\n# install.packages(\"scico\")\n\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = temp)\n  ) +\n  geom_point() +\n  scico::scale_color_scico(\n    name = \"Temperature:\",\n    palette = \"batlow\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/color-palettes-scico-1.png){width=1000}\n:::\n:::\n\n\n\n\n## \\`scale_color\\|fill_scico\\`\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/color-palettes-scico-direction_d10e6bbda94831c0d8f40e66841c9729'}\n\n```{.r .cell-code  code-line-numbers=\"11,12\"}\n# install.packages(\"scico\")\n\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = temp)\n  ) +\n  geom_point() +\n  scico::scale_color_scico(\n    name = \"Temperature:\",\n    palette = \"managua\",\n    direction = -1\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/color-palettes-scico-direction-1.png){width=1000}\n:::\n:::\n\n\n\n\n## {scico}\n\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/color-palettes-scico-show-all_cf5ef965fe5bb0d213ff79061b3bc7ce'}\n\n```{.r .cell-code}\nscico::scico_palette_show()\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/color-palettes-scico-show-all-1.png){width=2400}\n:::\n:::\n\n\n\n\n# Exercise\n\n\n\n## Your Turn!\n\n::: question\n**Modify our diamonds facet like this:**\n\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/exercise-scales_ffa1432e7e461196bf61a5dbf8cc3815'}\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/exercise-scales-1.png){width=1000}\n:::\n:::\n\n:::\n\n\n\n# Solution Exercise {background-color=\"#e6d9f2\"}\n\n\n\n## Diamonds Facet\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/diamonds-facet-store_e61c4665b7b043321f44cf10f144b9be'}\n\n```{.r .cell-code  code-line-numbers=\"1|10|19\"}\nfacet <-\n  ggplot(\n    diamonds,\n    aes(x = carat, y = price)\n  ) +\n  geom_point(\n    alpha = .3\n  ) +\n  geom_smooth(\n    aes(color = cut),\n    se = FALSE\n  ) +\n  facet_grid(\n    cut ~ clarity,\n    space = \"free_x\",\n    scales = \"free_x\"\n  )\n\nfacet\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/diamonds-facet-store-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Diamonds Facet\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/diamonds-facet-scales-x_3090c080f1b2d5f7c4be8e936daf9ab9'}\n\n```{.r .cell-code  code-line-numbers=\"2,3,4\"}\nfacet +\n  scale_x_continuous(\n    limits = c(0, NA)\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/diamonds-facet-scales-x-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Diamonds Facet\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/diamonds-facet-scales-y_5c5bf2023b7d3ec4828c85566766c70b'}\n\n```{.r .cell-code  code-line-numbers=\"5,6,7,8\"}\nfacet +\n  scale_x_continuous(\n    limits = c(0, NA)\n  ) +\n  scale_y_continuous(\n    breaks = 0:5*5000,\n    labels = c(\"$0\", \"$5,000\", \"$10,000\", \"$15,000\", \"$20,000\", \"$25,000\")\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/diamonds-facet-scales-y-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Diamonds Facet\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/diamonds-facet-scales-y-paste-format_0533678cb34e5b0b9c092851b2def700'}\n\n```{.r .cell-code  code-line-numbers=\"7,8,9\"}\nfacet +\n  scale_x_continuous(\n    limits = c(0, NA)\n  ) +\n  scale_y_continuous(\n    breaks = 0:5*5000,\n    labels = paste0(\n      \"$\", format(0:5*5000, big.mark = \",\", trim = TRUE)\n    )\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/diamonds-facet-scales-y-paste-format-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Diamonds Facet\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/diamonds-facet-scales-y-function_3005ca6840ce75f41c6976f3a69dfa93'}\n\n```{.r .cell-code  code-line-numbers=\"7,8,9\"}\nfacet +\n  scale_x_continuous(\n    limits = c(0, NA)\n  ) +\n  scale_y_continuous(\n    breaks = 0:5*5000,\n    labels = function(y) paste0(\n      \"$\", format(y, big.mark = \",\", trim = TRUE)\n    )\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/diamonds-facet-scales-y-function-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Diamonds Facet\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/diamonds-facet-scales-y-dollar-format_ab7aec506db0d006176b401b3c5f7d69'}\n\n```{.r .cell-code  code-line-numbers=\"7\"}\nfacet +\n  scale_x_continuous(\n    limits = c(0, NA)\n  ) +\n  scale_y_continuous(\n    breaks = 0:5*5000,\n    labels = scales::dollar_format()\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/diamonds-facet-scales-y-dollar-format-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Diamonds Facet\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/diamonds-facet-scales-color_4235a4303354d964ccf228746dbb7ce6'}\n\n```{.r .cell-code  code-line-numbers=\"9,10,11,12\"}\nfacet +\n  scale_x_continuous(\n    limits = c(0, NA)\n  ) +\n  scale_y_continuous(\n    breaks = 0:5*5000,\n    labels = scales::dollar_format()\n  ) +\n  rcartocolor::scale_color_carto_d(\n    palette = \"Pastel\", \n    guide = \"none\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/diamonds-facet-scales-color-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Diamonds Facet\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/diamonds-facet-scales-no-legend_03f2bc9fc251d2d358c7d240426ccf2b'}\n\n```{.r .cell-code  code-line-numbers=\"12,13,14\"}\nfacet +\n  scale_x_continuous(\n    limits = c(0, NA)\n  ) +\n  scale_y_continuous(\n    breaks = 0:5*5000,\n    labels = scales::dollar_format()\n  ) +\n  rcartocolor::scale_color_carto_d(\n    palette = \"Pastel\"\n  ) +\n  theme(\n    legend.position = \"none\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/diamonds-facet-scales-no-legend-1.png){width=1000}\n:::\n:::\n\n\n\n\n# Customize Palettes\n\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/color-palettes-carto-default_000d88fa8562d65be84c9acc6d979b41'}\n\n```{.r .cell-code  code-line-numbers=\"5,6,7\"}\nggplot(bikes, \n       aes(x = day_night, y = count, \n           fill = season)) +\n  geom_boxplot() +\n  rcartocolor::scale_fill_carto_d(\n    palette = \"Vivid\" \n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/color-palettes-carto-default-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/color-palettes-carto-manual_6998024050cb3bb069bb519a6403dc40'}\n\n```{.r .cell-code  code-line-numbers=\"5,9|6,7,8\"}\nggplot(bikes, \n       aes(x = day_night, y = count, \n           fill = season)) +\n  geom_boxplot() +\n  scale_fill_manual(\n    values = rcartocolor::carto_pal(\n      name = \"Vivid\", n = 4\n    )\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/color-palettes-carto-manual-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/color-palettes-carto-custom_3de05faa4bff6562c62e91c1cfe53568'}\n\n```{.r .cell-code  code-line-numbers=\"6,7,8|7|8\"}\nggplot(bikes, \n       aes(x = day_night, y = count, \n           fill = season)) +\n  geom_boxplot() +\n  scale_fill_manual(\n    values = rcartocolor::carto_pal(\n      name = \"Vivid\", n = 5\n    )[1:4]\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/color-palettes-carto-custom-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/color-palettes-carto-custom-2_fb1694a5993f18de978ea20264877b7f'}\n\n```{.r .cell-code  code-line-numbers=\"6,7,8|7|8\"}\nggplot(bikes, \n       aes(x = day_night, y = count, \n           fill = season)) +\n  geom_boxplot() +\n  scale_fill_manual(\n    values = rcartocolor::carto_pal(\n      name = \"Vivid\", n = 7\n    )[c(2, 6, 1, 3)]\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/color-palettes-carto-custom-2-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/color-palettes-carto-custom-assign_70254044eeb96b996074973000f07a3b'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4|11\"}\ncarto_custom <- \n  rcartocolor::carto_pal(\n    name = \"Vivid\", n = 7\n  )[c(2, 6, 1, 3)]\n\nggplot(bikes, \n       aes(x = day_night, y = count, \n           fill = season)) +\n  geom_boxplot() +\n  scale_fill_manual(\n    values = carto_custom\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/color-palettes-carto-custom-assign-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/color-palettes-carto-light_94cfd0937b03a228678013f8aa238ad7'}\n\n```{.r .cell-code  code-line-numbers=\"1|3,4,5|12\"}\nlibrary(prismatic)\n\ncarto_light <- clr_lighten(\n  carto_custom, .7\n)\n\nggplot(bikes, \n       aes(x = day_night, y = count, \n           fill = season)) +\n  geom_boxplot() +\n  scale_fill_manual(\n    values = carto_light\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/color-palettes-carto-light-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/color-palettes-carto-afterscale_c814aab958c88eac2a71fd93f56ff313'}\n\n```{.r .cell-code  code-line-numbers=\"2,4|10|4,5,6,7\"}\nggplot(bikes, \n       aes(x = day_night, y = count)) +\n  geom_boxplot(\n    aes(fill = season,\n        fill = after_scale(\n          clr_lighten(fill, .7)\n    ))\n  ) +\n  scale_fill_manual(\n    values = carto_custom\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/color-palettes-carto-afterscale-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/color-palettes-carto-afterscale-stage_4494ce500e1020ecc5efafdd92fffd69'}\n\n```{.r .cell-code  code-line-numbers=\"4,5,6,7\"}\nggplot(bikes, \n       aes(x = day_night, y = count)) +\n  geom_boxplot(\n    aes(fill = stage(\n      season, \n      after_scale = clr_lighten(fill, .7)\n    ))\n  ) +\n  scale_fill_manual(\n    values = carto_custom\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/color-palettes-carto-afterscale-stage-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/color-palettes-carto-afterscale-2_ae35c74bcdfbe071b8315bab2c2fb192'}\n\n```{.r .cell-code  code-line-numbers=\"4|4,5,6,7\"}\nggplot(bikes, \n       aes(x = day_night, y = count)) +\n  geom_boxplot(\n    aes(color = season,\n        fill = after_scale(\n          clr_lighten(color, .7)\n    ))\n  ) +\n  scale_color_manual(\n    values = carto_custom\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/color-palettes-carto-afterscale-2-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/color-palettes-carto-afterscale-combined_8a4a0e3ea585bd74be3b16fc1c33bb53'}\n\n```{.r .cell-code  code-line-numbers=\"3,10|4,5,6,7|4,5,6,7,11,12,13,14|4,5,6,7,11,12,13,14,21,22,23|3,8|10,15,16,17,18\"}\nggplot(bikes,\n       aes(x = day_night, y = count)) +\n  geom_boxplot(\n    aes(color = season,\n        fill = after_scale(\n          clr_lighten(color, .7)\n    )),\n    outlier.shape = NA\n  ) +\n  geom_jitter(\n    aes(color = season,\n        color = after_scale(\n          clr_darken(color, .4)\n    )), \n    position = position_jitterdodge(\n      dodge.width = .75, \n      jitter.width = .2\n    ),\n    alpha = .3, size = .6\n  ) +\n  scale_color_manual(\n    values = carto_custom\n  ) +\n  theme(legend.position = \"top\")\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/color-palettes-carto-afterscale-combined-1.png){width=1000}\n:::\n:::\n\n\n\n\n# Coordinate Systems\n\n\n\n## Coordinate Systems\n\n<br>\n\n<b class='simple-highlight-grn' style='font-size:2.6rem;'>= interpret the position aesthetics</b><br><br>\n\n::: incremental\n-   **linear coordinate systems:** preserve the geometrical shapes\n    -   `coord_cartesian()`\n    -   `coord_fixed()`\n    -   `coord_flip()`\n-   **non-linear coordinate systems:** likely change the geometrical shapes\n    -   `coord_polar()`\n    -   `coord_map()` and `coord_sf()`\n    -   `coord_trans()`\n:::\n\n\n\n## Cartesian Coordinate System\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/coord-cartesian_a2252d980c7efbbf3cba2de23c7b7634'}\n\n```{.r .cell-code  code-line-numbers=\"6\"}\nggplot(\n    bikes,\n    aes(x = season, y = count)\n  ) +\n  geom_boxplot() +\n  coord_cartesian()\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/coord-cartesian-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Cartesian Coordinate System\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/coord-cartesian-zoom_e5126d4fd020801bcb20aee8dac905d4'}\n\n```{.r .cell-code  code-line-numbers=\"6,7,8\"}\nggplot(\n    bikes,\n    aes(x = season, y = count)\n  ) +\n  geom_boxplot() +\n  coord_cartesian(\n    ylim = c(NA, 15000)\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/coord-cartesian-zoom-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Changing Limits\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/coord-cartesian-ylim_11ef7471035b59c785b007f7f4f7e616'}\n\n```{.r .cell-code  code-line-numbers=\"6,7,8\"}\nggplot(\n    bikes,\n    aes(x = season, y = count)\n  ) +\n  geom_boxplot() +\n  coord_cartesian(\n    ylim = c(NA, 15000)\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/coord-cartesian-ylim-1.png){width=1000}\n:::\n:::\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/scale-y-limits_84d7d66d1764f7c271ee30ed16d375dc'}\n\n```{.r .cell-code  code-line-numbers=\"6,7,8\"}\nggplot(\n    bikes,\n    aes(x = season, y = count)\n  ) +\n  geom_boxplot() +\n  scale_y_continuous(\n    limits = c(NA, 15000)\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/scale-y-limits-1.png){width=1000}\n:::\n:::\n\n:::\n\n\n\n## Clipping\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/coord-clip_a2c4a7e51a99f7519faa5bb22e46d1b3'}\n\n```{.r .cell-code  code-line-numbers=\"8|10,11,12\"}\nggplot(\n    bikes,\n    aes(x = season, y = count)\n  ) +\n  geom_boxplot() +\n  coord_cartesian(\n    ylim = c(NA, 15000),\n    clip = \"off\"\n  ) +\n  theme(\n    plot.margin = margin(t = 150)\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/coord-clip-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Clipping\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/coord-clip-text_f6e819fca09d7cd3a33c615501351526'}\n\n```{.r .cell-code  code-line-numbers=\"2,3|6,7,8,9,10|12\"}\nggplot(\n    filter(bikes, is_holiday == TRUE),\n    aes(x = temp, y = count)\n  ) +\n  geom_point() +\n  geom_text(\n    aes(label = season),\n    nudge_x = .3,\n    hjust = 0\n  ) +\n  coord_cartesian(\n    clip = \"off\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/coord-clip-text-1.png){width=1000}\n:::\n:::\n\n\n\n\n## ... or better use {ggrepel}\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/coord-clip-text-repel_5551d923cfa4fcb3c747782c49f2ffc5'}\n\n```{.r .cell-code  code-line-numbers=\"6\"}\nggplot(\n    filter(bikes, is_holiday == TRUE),\n    aes(x = temp, y = count)\n  ) +\n  geom_point() +\n  ggrepel::geom_text_repel(\n    aes(label = season),\n    nudge_x = .3,\n    hjust = 0\n  ) +\n  coord_cartesian(\n    clip = \"off\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/coord-clip-text-repel-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Remove All Padding\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/coord-expand-off-clip_6eb58bd300e4841d6b1f9eba4926b3bc'}\n\n```{.r .cell-code  code-line-numbers=\"7|8\"}\nggplot(\n    bikes,\n    aes(x = temp, y = count)\n  ) +\n  geom_point() +\n  coord_cartesian(\n    expand = FALSE,\n    clip = \"off\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/coord-expand-off-clip-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Fixed Coordinate System\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/coord-fixed_2a01b23c46fbbb9b0867c38bc518516c'}\n\n```{.r .cell-code  code-line-numbers=\"6\"}\nggplot(\n    bikes,\n    aes(x = temp, y = temp_feel)\n  ) +\n  geom_point() +\n  coord_fixed()\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/coord-fixed-1.png){width=1000}\n:::\n:::\n\n\n::: fragment\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/coord-fixed-custom_9b5675ff892653d4784ddf3e707c77d4'}\n\n```{.r .cell-code  code-line-numbers=\"6\"}\nggplot(\n    bikes,\n    aes(x = temp, y = temp_feel)\n  ) +\n  geom_point() +\n  coord_fixed(ratio = 4)\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/coord-fixed-custom-1.png){width=1000}\n:::\n:::\n\n:::\n:::\n\n\n\n## Flipped Coordinate System\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/coord-cartesian-comp-flip_07c3a16182488512fa091ff9148b38bf'}\n\n```{.r .cell-code  code-line-numbers=\"6\"}\nggplot(\n    bikes,\n    aes(x = weather_type)\n  ) +\n  geom_bar() +\n  coord_cartesian()\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/coord-cartesian-comp-flip-1.png){width=1000}\n:::\n:::\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/coord-flip_4cc582942555b0dfb30e902d64654840'}\n\n```{.r .cell-code  code-line-numbers=\"6\"}\nggplot(\n    bikes,\n    aes(x = weather_type)\n  ) +\n  geom_bar() +\n  coord_flip()\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/coord-flip-1.png){width=1000}\n:::\n:::\n\n:::\n\n\n\n## Flipped Coordinate System\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/coord-cartesian-switch-x-y_0d0c2b73a75b3aa9d23f72e3ec746e0b'}\n\n```{.r .cell-code  code-line-numbers=\"3,6\"}\nggplot(\n    bikes,\n    aes(y = weather_type)\n  ) +\n  geom_bar() +\n  coord_cartesian()\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/coord-cartesian-switch-x-y-1.png){width=1000}\n:::\n:::\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/coord-flip-again_ae4373700e181acf6867b227e33ceaa9'}\n\n```{.r .cell-code  code-line-numbers=\"3,6\"}\nggplot(\n    bikes,\n    aes(x = weather_type)\n  ) +\n  geom_bar() +\n  coord_flip()\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/coord-flip-again-1.png){width=1000}\n:::\n:::\n\n:::\n\n\n\n## Reminder: Sort Your Bars!\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/forcats-sort-infreq_459f936ae10a73a46a3697db1e109bf6'}\n\n```{.r .cell-code  code-line-numbers=\"1|5\"}\nlibrary(forcats)\n\nggplot(\n    filter(bikes, !is.na(weather_type)),\n    aes(y = fct_infreq(weather_type))\n  ) +\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/forcats-sort-infreq-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Reminder: Sort Your Bars!\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/forcats-sort-infreq-rev_fda1e7939bd0b92c42243d22401fe497'}\n\n```{.r .cell-code  code-line-numbers=\"4,5,6\"}\nggplot(\n    filter(bikes, !is.na(weather_type)),\n    aes(\n      y = fct_rev(\n        fct_infreq(weather_type)\n      )\n    )\n  ) +\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/forcats-sort-infreq-rev-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Circular Coordinate System\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/coord-cartesian-comp-polar_90629e099f35fb6d6fdd62bd811eda52'}\n\n```{.r .cell-code  code-line-numbers=\"7\"}\nggplot(\n    bikes,\n    aes(x = is_workday,\n        fill = is_workday)\n  ) +\n  geom_bar() +\n  coord_cartesian()\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/coord-cartesian-comp-polar-1.png){width=1000}\n:::\n:::\n\n\n::: fragment\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/coord-polar_3a3319eb4a97768af729732c996aad0e'}\n\n```{.r .cell-code  code-line-numbers=\"7\"}\nggplot(\n    bikes,\n    aes(x = is_workday,\n        fill = is_workday)\n  ) +\n  geom_bar() +\n  coord_polar()\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/coord-polar-1.png){width=1000}\n:::\n:::\n\n:::\n:::\n\n\n\n## Circular Coordinate System\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/coord-cartesian-comp-polar-no-padding_00ceac5b7d3a42ff10fcefe7dee67b4d'}\n\n```{.r .cell-code  code-line-numbers=\"6,7\"}\nggplot(\n    bikes,\n    aes(x = is_workday,\n        fill = is_workday)\n  ) +\n  geom_bar(width = 1) +\n  coord_cartesian()\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/coord-cartesian-comp-polar-no-padding-1.png){width=1000}\n:::\n:::\n\n\n::: fragment\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/coord-polar-coxcomb_acd65e52743171154ddcfa9c312e4549'}\n\n```{.r .cell-code  code-line-numbers=\"6,7\"}\nggplot(\n    bikes,\n    aes(x = is_workday,\n        fill = is_workday)\n  ) +\n  geom_bar(width = 1) +\n  coord_polar()\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/coord-polar-coxcomb-1.png){width=1000}\n:::\n:::\n\n:::\n:::\n\n\n\n## Circular Coordinate System\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/coord-polar-theta-x_83af66db02c93ad84174ee15cedc8eb1'}\n\n```{.r .cell-code  code-line-numbers=\"7\"}\nggplot(\n    bikes,\n    aes(x = is_workday,\n        fill = is_workday)\n  ) +\n  geom_bar() +\n  coord_polar(theta = \"x\")\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/coord-polar-theta-x-1.png){width=1000}\n:::\n:::\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/coord-polar-theta-y_ea40fda926ed931a04585e8858548ad3'}\n\n```{.r .cell-code  code-line-numbers=\"7\"}\nggplot(\n    bikes,\n    aes(x = is_workday,\n        fill = is_workday)\n  ) +\n  geom_bar() +\n  coord_polar(theta = \"y\")\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/coord-polar-theta-y-1.png){width=1000}\n:::\n:::\n\n:::\n\n\n## Circular Coordinate System\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/coord-cartesian-comp-polar-stacked_f78e7783a58185ec5da0eaf11fcad336'}\n\n```{.r .cell-code  code-line-numbers=\"5\"}\nggplot(\n    bikes,\n    aes(x = 1, fill = is_workday)\n  ) +\n  geom_bar() +\n  coord_cartesian() \n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/coord-cartesian-comp-polar-stacked-1.png){width=1000}\n:::\n:::\n\n\n::: fragment\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/coord-polar-pie_0dff2d6a109deda3e8f6b8917bd01cb9'}\n\n```{.r .cell-code  code-line-numbers=\"5\"}\nggplot(\n    bikes,\n    aes(x = 1, fill = is_workday)\n  ) +\n  geom_bar() +\n  coord_polar(theta = \"y\") \n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/coord-polar-pie-1.png){width=1000}\n:::\n:::\n\n:::\n:::\n\n\n\n## Transform a Coordinate System\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/coord-trans-log_75ee6964b124a80e107ffd11f2070d2a'}\n\n```{.r .cell-code  code-line-numbers=\"6\"}\nggplot(\n    bikes,\n    aes(x = temp, y = count)\n  ) +\n  geom_point() +\n  coord_trans(y = \"log10\")\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/coord-trans-log-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Transform a Coordinate System\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/trans-log-via-coord_b1cf6be73a72241dad2a036803bdfeea'}\n\n```{.r .cell-code  code-line-numbers=\"8\"}\nggplot(\n    bikes,\n    aes(x = temp, y = count,\n        group = day_night)\n  ) +\n  geom_point() +\n  geom_smooth(method = \"lm\") +\n  coord_trans(y = \"log10\")\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/trans-log-via-coord-1.png){width=1000}\n:::\n:::\n\n\n::: fragment\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/trans-log-via-scale_335c93da10c1d8a435c8da55295bf951'}\n\n```{.r .cell-code  code-line-numbers=\"8\"}\nggplot(\n    bikes,\n    aes(x = temp, y = count,\n        group = day_night)\n  ) +\n  geom_point() +\n  geom_smooth(method = \"lm\") +\n  scale_y_log10()\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/trans-log-via-scale-1.png){width=1000}\n:::\n:::\n\n:::\n:::\n\n\n\n## Spatial Coordinate (Reference) Systems\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/coord-sf_8af01aedf5f37b8a098e45f590e497c2'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3|5,6,11|7|8,9,10\"}\ncountries <- rnaturalearth::ne_countries(\n  returnclass = \"sf\"\n)\n\nggplot() +\n  geom_sf(\n    data = countries,\n    color = \"#79dfbd\",\n    fill = \"#28a87d\",\n    linewidth = .3\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/coord-sf-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Spatial Coordinate (Reference) Systems\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/coord-sf-mollweide_1cb9ca8617fd0a3f651aa5dd7abca2a8'}\n\n```{.r .cell-code  code-line-numbers=\"8,9,10\"}\nggplot() +\n  geom_sf(\n    data = countries,\n    color = \"#79dfbd\",\n    fill = \"#28a87d\",\n    linewidth = .3\n  ) +\n  coord_sf(\n    crs = \"+proj=moll\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/coord-sf-mollweide-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Spatial Coordinate (Reference) Systems\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/coord-sf-bonne_00024bdb3ea70c7d83cb205bb5c36ccb'}\n\n```{.r .cell-code  code-line-numbers=\"9\"}\nggplot() +\n  geom_sf(\n    data = countries,\n    color = \"#79dfbd\",\n    fill = \"#28a87d\",\n    linewidth = .3\n  ) +\n  coord_sf(\n    crs = \"+proj=bonne +lat_1=10\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/coord-sf-bonne-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Generate Own Simple Features Objects\n\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/locator-bln_a0aa9c25f41cac24ea5f7fafa8727cdd'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4|2|3\"}\nsf_bln <- sf::st_sfc(\n  sf::st_point(c(13.4050, 52.5200)), \n  crs = sf::st_crs(countries)\n)\n```\n:::\n\n\n\n\n## Generate Own Simple Features Objects\n\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/locator-bln-print_fbeaf046b789b3c7912c8598cc7162d1'}\n\n```{.r .cell-code  code-line-numbers=\"6\"}\nsf_bln <- sf::st_sfc(\n  sf::st_point(c(13.4050, 52.5200)), \n  crs = sf::st_crs(countries)\n)\n\nsf_bln\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nGeometry set for 1 feature \nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 13.405 ymin: 52.52 xmax: 13.405 ymax: 52.52\nCRS:           +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0\n```\n:::\n:::\n\n\n\n\n## Spatial Coordinate (Reference) Systems\n\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/map-locator-bln_79ebe3061cbd8a302449a382f8872c52'}\n\n```{.r .cell-code}\nggplot() +\n  geom_sf(data = countries, fill = \"grey50\", color = NA) + \n  geom_sf(data = sf_bln, shape = 21, color = \"firebrick\", fill = NA, size = 5, stroke = 2)\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/map-locator-bln-1.png){width=3200}\n:::\n:::\n\n\n\n\n## Spatial Coordinate (Reference) Systems\n\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/map-locator-bln-proj_7baea0750edd2e46b6035f261aa96ac5'}\n\n```{.r .cell-code}\nggplot() +\n  geom_sf(data = countries, fill = \"grey50\", color = NA) + \n  geom_sf(data = sf_bln, shape = 21, color = \"firebrick\", fill = NA, size = 5, stroke = 2) +\n  coord_sf(crs = \"+proj=moll\")\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/map-locator-bln-proj-1.png){width=3200}\n:::\n:::\n\n\n\n\n## Spatial Coordinate (Reference) Systems\n\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/rnaturalearth-ocean-data_ac1792bc91ba4b34b94ee4bce43d33df'}\n\n```{.r .cell-code}\noceans <- rnaturalearth::ne_download(\n  category = \"physical\", type = \"ocean\", returnclass = \"sf\"\n)\n```\n:::\n\n\n\n\n## Spatial Coordinate (Reference) Systems\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/coord-sf-bonne-ocean_8ee22a6a2290c652333fa5b681cdeb41'}\n\n```{.r .cell-code  code-line-numbers=\"2,3,4,5|3,7|15\"}\nggplot() +\n  geom_sf(\n    data = oceans,\n    fill = \"#d8f1f6\"\n  ) +\n  geom_sf(\n    data = countries,\n    color = \"#79dfbd\",\n    fill = \"#28a87d\",\n    linewidth = .3\n  ) +\n  coord_sf(\n    crs = \"+proj=moll\"\n  ) +\n  theme_void()\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/coord-sf-bonne-ocean-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Mapping of Visual Properties\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/coord-sf-bonne-ocean-aes_b9ef8350e88451b57e9ed3c6a1ab4999'}\n\n```{.r .cell-code  code-line-numbers=\"9|10|16\"}\nggplot() +\n  geom_sf(\n    data = oceans,\n    fill = \"#d8f1f6\",\n    color = \"white\"\n  ) +\n  geom_sf(\n    data = countries,\n    aes(fill = economy),\n    color = \"white\",\n    linewidth = .3\n  ) +\n  coord_sf(\n    crs = \"+proj=moll\"\n  ) +\n  scale_fill_viridis_d(option = \"magma\") +\n  theme_void() +\n  theme(legend.position = \"top\")\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/coord-sf-bonne-ocean-aes-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Better Borders\n\n\n::: {.cell output-location='column' hash='03-ggplot-concepts-pt2_cache/revealjs/coord-sf-bonne-ocean-inner_ed29ab80ade31254b8f427cded3719ec'}\n\n```{.r .cell-code  code-line-numbers=\"1,10,12,13,14,15,16,17\"}\nborders <- rmapshaper::ms_innerlines(countries)\n\nggplot() +\n  geom_sf(\n    data = oceans,\n    fill = \"#d8f1f6\",\n    color = \"white\"\n  ) +\n  geom_sf(\n    data = countries,\n    aes(fill = economy),\n    color = \"transparent\"\n  ) +\n  geom_sf(\n    data = borders,\n    fill = \"transparent\",\n    color = \"white\",\n    linewidth = .3\n  ) +\n  coord_sf(\n    crs = \"+proj=moll\"\n  ) +\n  scale_fill_viridis_d(option = \"magma\") +\n  theme_void() +\n  theme(legend.position = \"top\")\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/coord-sf-bonne-ocean-inner-1.png){width=1000}\n:::\n:::\n\n\n\n\n## <b style='color:#663399;'>Recap</b>\n\n::: recap\n::: incremental\n-   **`facet_*()`** functions allow to create small multiples\n-   **`scale_*()`** functions translate between `aes`thetics and properties\n-   use **`*_continuous()`** for numerical data\n-   ... and **`*_discrete()`** for categorical data\n-   use **`scale_color|fill_*()`** to customize data-related colors\n-   **`coord_*()`** functions interpret the positional aesthetics\n    -   e.g. create polar plots or work with spatial projections \n-   be careful when adjusting axis limits:\n    -   `scale_*_continuous(limits)` removes the data outside the range\n    -   `coord_*(*lim)` keeps the data and zooms into the range\n:::\n:::\n\n\n\n# Exercises\n\n\n\n## Exercise 1\n\n::: question\n-   Download data set(s) for your home country or study area and plot it/them.\n-   Change the projection with `coord_sf()` and observe how the spatial mapping changes.\n-   Choose a projection that is suited for the given area.\n-   Add a marker to indicate your home city, exact location of the study etc.\n:::\n\n\n\n## Exercise 2\n\n::: question\n::: incremental\n-   Have a look at the following visualization of the cumulative time that cosmo- and astronauts have spent in outer space. The data also contains information on the year of their first and last travel, respectively.\n-   Together with your group, discuss which layers and modifications are needed to create such a chart with `{ggplot2}`.\n-   Note down the aesthetics, geometries, and scales used for each element of this graphic.\n-   What is the coordinate system? Have any adjustments been made?\n-   Which theme was used and how was it modified?\n:::\n:::\n\n\n\n##  {background-image=\"img/exercises/astronaut-viz-detail.png\" background-position=\"center\" background-size=\"61%\"}\n\n\n\n# Solution Exercise 1 {background-color=\"#e6d9f2\"}\n\n\n\n## Exercise 1\n\n::: question\n-   Download data set(s) for your home country or study area and plot it/them.\n-   Change the projection with `coord_sf()` and observe how the spatial mapping changes.\n-   Choose a projection that is suited for the given area.\n-   Add a marker to indicate your home city, exact location of the study etc.\n:::\n\n\n\n## Setup\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(sf)\n\ntheme_set(theme_minimal(base_size = 14, base_family = \"Asap SemiCondensed\"))\ntheme_update(panel.grid.minor = element_blank())\n\nsf_germany <- rnaturalearth::ne_countries(country = \"Germany\", returnclass = \"sf\")\nsf_germany_hd <- rnaturalearth::ne_countries(country = \"Germany\", scale = 10, returnclass = \"sf\")\n\nclass(sf_germany)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"sf\"         \"data.frame\"\n```\n:::\n:::\n\n\n\n\n## Plot the Data\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/data-germany-lowres_8e984a8c5165bad161cc74e68bc66c7b'}\n\n```{.r .cell-code}\nggplot(sf_germany) +  \n  geom_sf(fill = \"#CBE7BE\")\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/data-germany-lowres-1.png){width=1000}\n:::\n:::\n\n\n::: fragment\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/data-germany-highres_f8189c591401b93b3c881c335db28fe4'}\n\n```{.r .cell-code}\nggplot(sf_germany_hd) + \n  geom_sf(fill = \"#CBE7BE\")\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/data-germany-highres-1.png){width=1000}\n:::\n:::\n\n:::\n:::\n\n\n\n## Change Projection\n\n\n::: {.cell layout-align=\"center\" hash='03-ggplot-concepts-pt2_cache/revealjs/data-germany-crs-proj4_a22f4fdee59e17a4254f4c27ace80942'}\n\n```{.r .cell-code}\nggplot(sf_germany) + \n  geom_sf(fill = \"#CBE7BE\") +\n  coord_sf(crs = \"+proj=lcc +lat_1=48.66 +lat_2=53.66 +lat_0=51 +lon_0=10.5 +ellps=GRS80\") \n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/data-germany-crs-proj4-1.png){fig-align='center' width=1000}\n:::\n:::\n\n\n\n\n## Change Projection\n\n\n::: {.cell layout-align=\"center\" hash='03-ggplot-concepts-pt2_cache/revealjs/data-germany-crs-epsg_a30e2b66e726a78697e2b612054ac211'}\n\n```{.r .cell-code}\nggplot(sf_germany) + \n  geom_sf(fill = \"#CBE7BE\") +\n  coord_sf(crs = st_crs(5243)) \n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/data-germany-crs-epsg-1.png){fig-align='center' width=1000}\n:::\n:::\n\n\n\n\n## Change Projection\n\n::: {.cell layout-align=\"center\" hash='03-ggplot-concepts-pt2_cache/revealjs/data-germany-crs-screwed_05134e626e611f0481a338906694d7a9'}\n\n```{.r .cell-code}\nggplot(sf_germany) + \n  geom_sf(fill = \"#CBE7BE\") +\n  coord_sf(crs = \"+proj=moll\") \n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/data-germany-crs-screwed-1.png){fig-align='center' width=1000}\n:::\n:::\n\n\n\n\n## Change Projection\n\n\n::: {.cell layout-align=\"center\" hash='03-ggplot-concepts-pt2_cache/revealjs/data-germany-crs-screwed2_c4d96938e7e500fe45dd7654dca44b8a'}\n\n```{.r .cell-code}\nggplot(sf_germany) + \n  geom_sf(fill = \"#CBE7BE\") +\n  coord_sf(crs = \"+proj=laea +lon_0=-70 +lat_0=0\") \n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/data-germany-crs-screwed2-1.png){fig-align='center' width=1320}\n:::\n:::\n\n\n\n\n## Generate Locator Object\n\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/locator-bln-again_e3a464c53293d30e91508c659900072f'}\n\n```{.r .cell-code}\nsf_bln <- sf::st_sfc(\n  sf::st_point(c(13.4050, 52.5200)), \n  crs = sf::st_crs(sf_germany)\n)\n\nsf_bln\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nGeometry set for 1 feature \nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 13.405 ymin: 52.52 xmax: 13.405 ymax: 52.52\nCRS:           +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0\n```\n:::\n:::\n\n\n\n\n## Add Location Marker\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/data-germany-crs-screwed-loc_03d0cc44f745aac6a7b05fa54f22c259'}\n\n```{.r .cell-code}\nggplot(sf_germany) + \n  geom_sf(fill = \"#CBE7BE\") +\n  geom_sf(data = sf_bln, size = 5) +\n  coord_sf(crs = \"+proj=moll\")\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/data-germany-crs-screwed-loc-1.png){width=1000}\n:::\n:::\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/data-germany-crs-fine-loc_f3c505e11e0fc6217a2d787d62e7c538'}\n\n```{.r .cell-code}\nggplot(sf_germany) + \n  geom_sf(fill = \"#CBE7BE\") +\n  geom_sf(data = sf_bln, size = 5) +\n  coord_sf(crs = st_crs(5243))\n```\n\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/data-germany-crs-fine-loc-1.png){width=1000}\n:::\n:::\n\n:::\n\n\n\n# Solution Exercise 2 {background-color=\"#e6d9f2\"}\n\n::: question\n-   Have a look at the following visualization of the cumulative time that cosmo- and astronauts have spent in outer space. The data also contains information on the year of their first and last travel, respectively.\n-   Together with your group, discuss which layers and modifications are needed to create such a chart with `{ggplot2}`.\n    -   Note down the aesthetics, geometries, and scales used for each element of this graphic.\n    -   What is the coordinate system? Have any adjustments been made?\n    -   Which theme was used and how was it modified?\n:::\n\n\n\n##  {background-image=\"img/exercises/astronaut-viz-detail.png\" background-position=\"center\" background-size=\"61%\"}\n\n\n\n------------------------------------------------------------------------\n\n### Layers\n\n::: incremental\n-   **`geom_point()`**\n    -   `aes(x = id, y = hours, size = hours)`\n-   **`geom_linerange()`**\n    -   `aes(x = id, ymin = 0, ymax = hours, color = hours, alpha = hours)`\n-   **`geom_point()`**\n    -   `aes(x = id, y = 0), shape = 15, color = \"#808080\"`\n-   **`geom_text()`**\n    -   `aes(x = id, y = 0, label = year), size = 4.5, hjust = 1.2`\n-   **`geom_text()`**\n    -   `aes(x = id, y = hours, label = max), size = 3.9, vjust = -.35`\n:::\n\n------------------------------------------------------------------------\n\n### Scales\n\n::: incremental\n-   **`scale_x_continuous()`**\n    -   `limits = c(-300, NA), expand = c(0, 0)`\n-   **`scale_y_continuous()`**\n    -   `limits = c(0, 230000), expand = c(0, 0)`\n-   **`scale_color_distiller()`**\n    -   `palette = \"YlGnBu, direction = -1`\n-   **`scale_size()`**\n    -   `range = c(.001, 3)`\n-   **`scale_alpha()`**\n    -   `range = c(.33, .95)`\n:::\n\n------------------------------------------------------------------------\n\n### Coordinate System\n\n::: incremental\n-   **`coord_polar()`**\n    -   `theta = \"y\"`\n:::\n\n------------------------------------------------------------------------\n\n### Coordinate System\n\n-   **`coord_polar()`**\n    -   `theta = \"y\"`\n\n### Theme\n\n::: incremental\n-   **`theme_void()`**\n    -   `legend.position = \"none\"`\n    -   `plot.background = element_rect(fill = \"black\")`\n    -   `plot.margin = margin(-70, -70, -70, -70)`\n    -   `plot.caption = element_text(hjust = .5, margin = margin(-100, 0, 100, 0), ...)`\n:::\n\n------------------------------------------------------------------------\n\n### Coordinate System\n\n-   **`coord_polar()`**\n    -   `theta = \"y\"`\n\n### Theme\n\n-   **`theme_void()`**\n    -   `legend.position = \"none\"`\n    -   `plot.background = element_rect(fill = \"black\")`\n    -   `plot.margin = margin(-70, -70, -70, -70)`\n    -   `plot.caption = element_text(...)`\n\n### Title\n\n::: incremental\n-   **2 x `annotate(geom = \"text\", x = -300, y = 0, ...)`**\n:::\n\n\n\n## Data Prep\n\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/import-data-astronauts_23525566936eb7c787d1638f141733aa'}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(dplyr)\n\ndf_astro <- readr::read_csv(\n  'https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-07-14/astronauts.csv'\n)\n\ndf_missions <-\n  df_astro %>%\n  group_by(name) %>%\n  summarize(\n    hours = sum(hours_mission),\n    year = min(year_of_mission),\n    max_year = max(year_of_mission)\n  ) %>%\n  ungroup() %>%\n  mutate(year = -year) %>%\n  arrange(year) %>%\n  mutate(id = row_number())\n```\n:::\n\n\n\n\n## Code Pt. 1\n\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/astronout-viz-blank_25f4794f028f8d50069f5a59b7c58014'}\n\n```{.r .cell-code}\n# install.packages(\"scico\")\n\ng1 <-\n  ggplot(df_missions, aes(x = id, y = hours, color = hours)\n    ) +\n    ## curves\n    geom_linerange(aes(ymin = 0, ymax = hours, alpha = hours), size = .25) +\n    ## baseline\n    geom_point(aes(y = 0), shape = 15, size = .1, color = \"#808080\") +\n    ## points\n    geom_point(aes(y = hours, size = hours)) +\n    ## turn into circular\n    coord_polar(theta = \"y\", start = 0, clip = \"off\") +\n    ## add axis spacings\n    scale_x_continuous(limits = c(-300, NA), expand = c(0, 0)) +\n    scale_y_continuous(limits = c(0, 23000), expand = c(0, 0)) +\n    ## change colors, transparencies, and bubble sizes\n    scale_color_distiller(palette = \"YlGnBu\", direction = -1) +\n    scale_size(range = c(.001, 3)) +\n    scale_alpha(range = c(.33, .95)) +\n    ## remove all theme components\n    theme_void() +\n    theme(\n      ## set dark background\n      plot.background = element_rect(fill = \"black\"),\n      ## remove \"white\" space\n      plot.margin = margin(-70, -70, -70, -70),\n      ## remove legends\n      legend.position = \"none\"\n    )\n```\n:::\n\n\n\n\n## Data Prep Labels\n\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/astronout-viz-label-dfs_18e9516efab4e09e274374af6b9d7f28'}\n\n```{.r .cell-code}\ndf_labs <-\n  df_missions %>%\n  filter(year %in% -c(1961, 197:201*10, 2019)) %>%\n  group_by(year) %>%\n  filter(id == min(id))\n\ndf_max <-\n  df_missions %>%\n  arrange(-hours) %>%\n  slice(1) %>%\n  mutate(\n    first_name = stringr::str_remove(name, \".*, \"),\n    last_name = stringr::str_remove(name, \"(?<=),.*\"),\n    label = paste(\"Between\", abs(year), \"and\", max_year, \",\\n\", first_name, last_name, \"has spent\\n\", format(hours, big.mark = ','), \"hours in space.\\nThat's roughly\", round(hours / 24, 0), \"days!\")\n  )\n```\n:::\n\n\n\n\n## Code Pt. 2\n\n\n::: {.cell hash='03-ggplot-concepts-pt2_cache/revealjs/astronout-viz-labels_4c2884d65347fcaaaa361cbe10b585d4'}\n\n```{.r .cell-code}\ng2 <-\n  g1 +\n    ## labels years\n    geom_text(\n      data = df_labs, aes(y = 0, label = abs(year)),\n      family = \"Lato\", fontface = \"bold\", color = \"#808080\",\n      size = 4.5, hjust = 1.2\n    ) +\n    ## label max\n    geom_text(\n      data = df_max, aes(label = label),\n      family = \"Lato\", size = 3.9, vjust = -.35\n    ) +\n    ## title shadow\n    annotate(\n      geom = \"text\", x = -300, y = 0, label = \"Travelling to\\nOuter Space\",\n      family = \"Boska\", fontface = \"bold\", lineheight = .9,\n      size = 20, color = \"white\", hjust = .57, vjust = .45, alpha = .25\n    ) +\n    ## title\n    annotate(\n      geom = \"text\", x = -300, y = 0, label = \"Travelling to\\nOuter Space\",\n      family = \"Boska\", fontface = \"bold\", lineheight = .85,\n      size = 20, color = \"white\", hjust = .55, vjust = .4\n    ) +\n    ## caption\n    labs(caption = \"Cumulative time in outer space for all 565 cosmonauts and astronauts who participated\n    in space missions between April 23, 1961 and January 15, 2020, sorted by the year of their first mission.\n\n    Graphic: Cédric Scherer • Data: Stavnichuk & Corlett 2020 (DOI: 10.17632/86tsnnbv2w.1)\") +\n    ## modify caption + move inside plot area\n    theme(\n      plot.caption = element_text(\n        family = \"Lato\",\n        size = 15, color = \"#808080\", hjust = .5,\n        margin = margin(-100, 0, 100, 0)\n      )\n    )\n```\n:::\n\n\n------------------------------------------------------------------------\n\n\n::: {.cell layout-align=\"center\" hash='03-ggplot-concepts-pt2_cache/revealjs/astronout-viz-plot_a717ea3fcff6a5d3bce23c680ee695e7'}\n::: {.cell-output-display}\n![](03-ggplot-concepts-pt2_files/figure-revealjs/astronout-viz-plot-1.png){fig-align='center' width=3000}\n:::\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}